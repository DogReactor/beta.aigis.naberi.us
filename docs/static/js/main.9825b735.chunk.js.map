{"version":3,"sources":["Components/Routes/Home/Home.module.less","Components/Routes/QuestList/QuestList.module.less","Components/ClassTable/ClassTable.module.less","logo.png","Components/Header/Header.module.less","Components/SkillTable/SkillTable.module.less","Components/AbilityTable/AbilityTable.module.less","Components/Routes/Home/pay.png","Components/MissileTable/MissileTable.module.less","Components/DotTable/DotTable.module.less","Components/Routes/Login/Login.module.less","Components/Routes/Unit/Unit.module.less","context/UserContext.ts","context/MediaContext.ts","Components/Header/Header.tsx","Components/Card/Card.tsx","utils.ts","consts.ts","Components/Loading/Loading.tsx","Components/Routes/Home/Home.tsx","Components/Rarity/Rarity.tsx","Components/Routes/UnitList/UnitListCard.tsx","fragments.ts","Components/Routes/Unit/types.ts","Components/Gender/Gender.tsx","Components/SkillTable/SkillTable.tsx","Components/AbilityTable/AbilityTable.tsx","Components/MissileTable/MissileTable.tsx","Components/ClassTable/ClassTable.tsx","Components/DotAnimation/DotAnimation.tsx","Components/DotTable/DotTable.tsx","Components/Routes/Unit/ConneNameInput.tsx","Components/Routes/Unit/NickNamesInput.tsx","Components/Routes/Unit/Unit.tsx","Components/Routes/UnitList/UnitList.tsx","Components/Routes/QuestList/types.ts","Components/Routes/QuestList/MissionShutter.tsx","Components/DotAnimation/TalkRow.tsx","Components/Routes/Quest/EnemyTable.tsx","Components/Routes/Quest/PreviewDot.tsx","Components/Routes/Quest/MapTable.tsx","Components/Routes/Quest/QuestTermTable.tsx","Components/Routes/Quest/Quest.tsx","Components/Routes/QuestList/QuestList.tsx","Components/Routes/ClassList/ClassList.tsx","Components/Routes/SkillList/SkillList.tsx","Components/Routes/AbilityList/AbilityList.tsx","Components/Routes/EmojiList/index.tsx","Components/Routes/Login/Login.tsx","Components/Routes/MissileList/MissileList.tsx","Components/Router.tsx","App.tsx","serviceWorker.ts","index.tsx","Components/Routes/Quest/Quest.module.less","Components/Routes/UnitList/UnitList.module.less","Components/Routes/EmojiList/index.module.less"],"names":["module","exports","createContainer","useState","localStorage","getItem","state","setState","login","token","setItem","isTabletOrMobile","useMediaQuery","query","Header","SubMenu","Item","HeaderBar","active","setActive","location","useLocation","useEffect","pathname","split","className","styles","header","to","alt","src","logo","mode","headerMenu","selectedKeys","key","title","ShadowedCard","this","props","React","Component","renderDescription","source","replace","range","min","max","length","res","gap","current","push","STATIC_URL","BASE_SERVER_URL","PLAYER_DOT_URL","ENEMY_DOT_URL","EMOJI_URL","ICO_URL","ENEMY_CHANGE_COND","0","1","2","3","4","5","BONUS_TYPE","obj","index","toString","6","7","8","9","fuck","Loading","arr","tip","Math","floor","random","size","style","marginTop","display","Content","Home","date","setDate","selectedDate","setSelectedDate","useQuery","gql","onCompleted","d","Posters","posterName","moment","slice","loading","data","posterRef","useRef","posterLoading","setPosterLoading","includes","format","BASE_GAME_URL","content","logoblock","topLogo","UpdateTime","fromNow","gutter","xs","md","Banners","map","bannerName","maxWidth","value","onChange","fullscreen","monthFullCellRender","first","find","p","startsWith","classNames","calendarMonthDisabled","onClick","localeData","monthsShort","disabledDate","spinning","ref","onLoad","width","beg","placement","trigger","payImage","type","role","aria-label","Rarity","rare","color","textShadow","UnitListCard","card","showUnit","setFilter","listCard","male","Kind","female","alignItems","CardID","height","Rare","Name","lg","RaceName","e","stopPropagation","AssignName","IdentityName","Classes","IllustName","DotFragment","MissileFragment","EnemyFragment","Gender","gender","SKILL_TYPE","Init","CC","Evo","SkillTableRows","skill","showConfigs","setShowConfigs","MediaContext","useContainer","secondRow","LevelMax","ContTimeMax","WaitTime","PowerMax","icon","Fragment","colSpan","SkillID","SkillName","textAlign","dangerouslySetInnerHTML","__html","Text","table","tableLayout","Cards","sort","c1","c2","marginLeft","Configs","config","borderBottom","_ExpressionActivate","_Expression","Data_InfluenceType","Data_MulValue","Data_MulValue2","Data_MulValue3","Data_AddValue","Type_Collision","Type_CollisionState","Data_Target","wordWrap","SkillTable","skills","ABILITY_TYPE","AbilityTable","ability","Type","AbilityID","AbilityName","_Command","_ActivateCommand","_InfluenceType","_Param1","_Param2","_Param3","_Param4","_InvokeType","_TargetType","MissileTable","missile","compact","isCompact","Property","MissileID","PatternID","Enemy","Speed","SlowTime","SlowRate","DamageArea","CLASS_TYPE","Evo2a","Evo2b","ClassTable","classData","useMutation","setClassMeta","NickNames","setValue","editing","setEditing","focus","ClassID","Explanation","AttackWait","ClassAbilityPower1","tokenSeparators","v","onBlur","a","async","variables","message","success","fakeInput","name","AttackAttribute","Missile","ClassAbilityConfigs","undefined","DotAnimation","dot","canvas","gif","canvasWidth","canvasHeight","top","bottom","left","right","tickNum","Length","timelines","dots","frameNum","Entries","forEach","entry","timeline","patternPos","t","pattern","PatternNo","prevFrame","frame","Sprite","X","Y","Width","Height","OriginX","OriginY","ParsedX","ParsedY","Alpha","Pos","Scale","Time","Sprites","Data","alphaPos","prevAlpha","nextAlpha","alphas","posPos","prevPos","nextPos","posesX","posesY","scalePos","prevScale","nextScale","scalesX","scalesY","generateTimelines","imageObj","Image","crossOrigin","ctx","getContext","currentTick","GIF","workers","quality","workerScript","transparent","on","blob","url","URL","createObjectURL","document","createElement","href","download","click","frameId","gifStatus","onload","imageLoop","window","requestAnimationFrame","clearRect","sprite","globalAlpha","drawImage","addFrame","copy","delay","cv","cancelAnimationFrame","render","DotTable","entryIndex","backgroundImage","backgroundPositionX","backgroundPositionY","ConneNameInput","ConneName","setCardMeta","setCardMetaLoading","handleSave","resp","console","log","target","onPressEnter","NickNamesInput","countMinMax","maxLevel","maxLevelUnit","mod","ceil","getStatus","BattleStyle","ranges","_Range_01","_Range_02","_Range_03","_Range_04","_Range_05","classes","_AwakePattern","findIndex","cl","splice","nearRange","Data_ExtraAwakeOrbs","HP","InitHP","MaxHP","MaxLevel","MaxHPMod","Atk","InitAtk","MaxAtk","AtkMod","Def","InitDef","MaxDef","DefMod","Cost","CostModValue","CostDecValue","AtkArea","classDataToUnit","Unit","match","useRouter","Number","parseInt","params","currentImg","setCurrentImg","currentText","setCurrentText","avatars","setAvatars","id","refetch","Card","filter","container","_","isEmpty","previewContainer","outerRadioContainer","inset","radioContainer","Group","radioGroup","ImageStand","Button","danger","ImageCG","HarlemTextA","HarlemTextR","outerImageContainer","imageContainer","textContainer","fullScreen","ghost","shape","closeButton","text","p1","avatar","onError","HomeCooking","SellPrice","_TradePoint","MagicResistance","BonusType","get","BonusNum","BonusType2","BonusNum2","BonusType3","BonusNum3","st","rowSpan","BlockNum","Skills","skillWithType","uniqBy","Abilities","Dots","sm","FILTER_TYPE","UnitList","order","sorter","setSorter","search","setSearch","filters","setFilters","setSize","scrolled","setScrolled","history","main","getElementsByTagName","handleResize","offsetWidth","offsetHeight","onresize","genSorter","cursor","getParam","keys","handleSetFilter","f","fs","cardID","modal","cards","cardA","cardB","paramA","paramB","flag","JSON","stringify","sourceValue","parsedValue","unitListContent","placeholder","event","filterContainer","closable","onClose","i","sorterBlock","shadow","listContainer","itemCount","itemSize","onScroll","scrollOffset","visible","destroyOnClose","getContainer","position","UnitListWrapper","MISSION_TYPE","Assault","Story","Emergency","Reproduce","DailyReproduce","Subjugation","DevilAdvent","Harlem","Daily","Challenge","Tutorial","Tower","Raid","MissionShutter","mission","showQuest","questID","MissionID","Mission","Quests","quest","QuestID","bind","float","Charisma","ActionPoint","TalkRow","talk","margin","FaceID","Message","EnemyTableRows","enemies","drops","expand","setExpand","Array","fill","showTable","setShowTable","previewSprite","types","SkyFlag","EnemyElem","_EnemyElementName","EnemyType","_EnemyTypeName","_Attribute","join","changeCondition","Param_ChangeParam","Param_ChangeCondition","imgID","dropImg","PrizeCardID","fontSize","marginRight","zoom","verticalAlign","enemy","attackSpeed","ATTACK_RANGE","ATTACK_SPEED","getAttackSpeed","background","TypeAttack","MagicAttack","ATTACK_POWER","ARMOR_DEFENSE","MAGIC_DEFENSE","Param_ResistanceAssassin","paddingTop","paddingBottom","Loop","RouteNo","SpecialtyConfigs","_ExtParam","Type_Influence","Param_1","Param_2","Param_3","Param_4","EnemyTable","Quest","Map","Enemies","entries","EntryNo","mapLevel","Level","showDuplicate","setShowDuplicate","showTalk","setShowTalk","Treasure1","Treasure2","Treasure3","Treasure4","Treasure5","treasure","parsedEnemies","parseEnemy","enemyID","EnemyID","enemyGroup","ea","newEnemy","checkedChildren","unCheckedChildren","checked","QuestEventTexts","command","EntryCommand","exec","s","recordIndex","BattleTalkEvents","RecordIndex","PreviewDot","MapTable","useImage","mapImg","heartImg","nearImg","farImg","setZoom","containerRef","circle","setCircle","routeNos","setRouteNos","resize","overflow","scaleX","scaleY","image","Locations","LocationNo","img","ObjectID","x","y","c","onMouseEnter","body","onMouseLeave","radius","stroke","Routes","routes","route","points","strokeWidth","Option","QuestTermTable","terms","term","Data_Expression","Data_Param1","Data_Param2","Data_Param3","Data_Param4","showTerms","setShowTerms","showHardTerms","setShowHardTerms","dropper","enemiesCount","haveDrop","drop","reduce","prev","curr","questContainer","questTitle","questInfo","RankExp","Gold","Capacity","QuestTerms","padding","QuestTermConfigs","_HardCondition","QuestHardTermConfigs","EventArcs","arc","_TalkerName","_TalkText","Sider","Panel","QuestList","currentMissionType","setCurrentMissionType","missions","Object","groupBy","Missions","theme","sider","onSelect","border","missionListContent","bordered","m","ClassList","currentPage","setCurrentPage","classFilter","unitClass","defaultCurrent","defaultPageSize","page","total","SkillList","skillFilter","handleSetSearch","AbilityList","abilityFilter","EmojiList","drawerVisible","currentEmoji","_id","emoji","group","modalVisible","currentImage","isImg","ext","indexOf","error","span","emojis","deleteIconContainer","mutation","removeEmoji","onConfirm","ID","then","deleteIcon","emojiDrawer","marginBottom","imageBox","imageCover","imageActionContainer","imageAction","removeEmojiItem","onCancel","footer","Login","useForm","getFieldDecorator","validateFields","UserContext","loginForm","prefix","values","block","MissileList","Missiles","withRouter","isLoggedIn","path","component","exact","locale","client","ApolloClient","uri","App","zhCN","Provider","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9825b735.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"content--3r6z8\",\"logoblock\":\"logoblock--296BZ\",\"topLogo\":\"topLogo--33_5D\",\"beg\":\"beg--18EC5\",\"postContainer\":\"postContainer--1nDMI\",\"calendarMonthDisabled\":\"calendarMonthDisabled--38ECZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sider\":\"sider--1H67N\",\"missionListContent\":\"missionListContent--2unrs\",\"ant-collapse-borderless\":\"ant-collapse-borderless--20xt2\",\"mission-type\":\"mission-type--1Gjki\",\"listCard\":\"listCard--2nbjx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--1QcJH\",\"th\":\"th--3CrBB\",\"compact\":\"compact--3SGrW\",\"fakeInput\":\"fakeInput--3aD2y\"};","module.exports = __webpack_public_path__ + \"static/media/logo.509ca4a9.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header--nlkOh\",\"logo\":\"logo--1BJO0\",\"headerMenu\":\"headerMenu--1GBBS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--1DsAt\",\"th\":\"th--3vyLs\",\"compact\":\"compact--2S6H2\",\"fakeInput\":\"fakeInput--jubeu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--IF6EY\",\"th\":\"th--iDq9c\",\"compact\":\"compact--RLpAq\",\"fakeInput\":\"fakeInput--1xECD\"};","module.exports = __webpack_public_path__ + \"static/media/pay.f5dab129.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--1V8Hg\",\"th\":\"th--183Ee\",\"compact\":\"compact--33fUs\",\"fakeInput\":\"fakeInput--334Hy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--2BMSm\",\"th\":\"th--FnBgT\",\"compact\":\"compact--2d1SD\",\"fakeInput\":\"fakeInput--AyhCo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"loginForm--3OVxD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--2hG_J\",\"th\":\"th--36mVi\",\"compact\":\"compact--1re4T\",\"fakeInput\":\"fakeInput--3vmc6\",\"container\":\"container--goCu8\",\"previewContainer\":\"previewContainer--J9R0N\",\"outerRadioContainer\":\"outerRadioContainer--1EKQe\",\"inset\":\"inset--d9CSK\",\"radioContainer\":\"radioContainer--CSvzk\",\"radioGroup\":\"radioGroup--18PZQ\",\"danger\":\"danger--3p-BL\",\"outerImageContainer\":\"outerImageContainer--2kmJA\",\"imageContainer\":\"imageContainer--2Irjl\",\"textContainer\":\"textContainer--2gsdv\",\"fullScreen\":\"fullScreen--37f7X\",\"closeButton\":\"closeButton--MOFv7\",\"text\":\"text--Jfrlt\"};","import { useState } from 'react';\nimport { createContainer } from 'unstated-next';\n\nfunction useUser() {\n  const [state, setState] = useState(localStorage.getItem('fuck') || '');\n  return {\n    get isLoggedIn() {\n      return (\n        state === 'fuckpulu' ||\n        state === 'fuckbaozitou' ||\n        state === 'fuckmaoxiong' ||\n        state === 'fucktuo'\n      );\n    },\n    login(token: string) {\n      setState(token);\n      localStorage.setItem('fuck', token);\n    },\n  };\n}\n\nexport default createContainer(useUser);\n","import { useMediaQuery } from 'react-responsive';\nimport { createContainer } from 'unstated-next';\n\nfunction useMedia() {\n  const isTabletOrMobile = useMediaQuery({ query: '(max-width: 991px)' });\n  return { isTabletOrMobile };\n}\n\nexport default createContainer(useMedia);\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport { useLocation } from 'react-router-dom';\nimport logo from '../../logo.png';\nimport styles from './Header.module.less';\n\nconst { Header } = Layout;\nconst { SubMenu, Item } = Menu;\n\nconst HeaderBar: React.FC = () => {\n  const [active, setActive] = useState('/');\n  const location = useLocation();\n  useEffect(() => {\n    setActive(location.pathname.split('/')[1]);\n  }, [location]);\n\n  return (\n    <Header className={styles.header}>\n      <Link to=\"/\">\n        <img alt=\"logo\" src={logo} className={styles.logo} />\n      </Link>\n      <Menu\n        mode=\"horizontal\"\n        className={styles.headerMenu}\n        selectedKeys={[active]}\n      >\n        <Item key=\"unit\">\n          <Link to=\"/unit\">单位</Link>\n        </Item>\n        <Item key=\"quest\">\n          <Link to=\"/quest\">关卡</Link>\n        </Item>\n        <SubMenu title=\"...\">\n          <Item key=\"class\">\n            <Link to=\"/class\">职业</Link>\n          </Item>\n          <Item key=\"skill\">\n            <Link to=\"/skill\">技能</Link>\n          </Item>\n          <Item key=\"ability\">\n            <Link to=\"/ability\">被动</Link>\n          </Item>\n          <Item key=\"missile\">\n            <Link to=\"/missile\">子弹</Link>\n          </Item>\n        </SubMenu>\n        {/* <Item key=\"emoji\">\n              <Link to=\"/emoji\">机器狗</Link>\n            </Item> */}\n      </Menu>\n    </Header>\n  );\n};\n\nexport default HeaderBar;\n","import React from 'react';\nimport { Card } from 'antd';\nimport { CardProps } from 'antd/lib/card';\nimport './Card.less';\n\nexport default class ShadowedCard extends React.Component<\n  CardProps\n> {\n  public render() {\n    return <Card {...this.props} className=\"card\" />;\n  }\n}\n","import { Dot, Frame } from './interfaces';\n\nexport class DefaultGetter {\n  private obj: any;\n  public constructor(obj: any) {\n    this.obj = obj;\n  }\n  public get(index: string | number) {\n    if (index in this.obj) {\n      return this.obj[index];\n    } else {\n      return index.toString();\n    }\n  }\n}\n\n// random choose a item from a array\nexport function choose<T>(arr: T[]) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function renderDescription(source: string) {\n  return (\n    '<span>' +\n    source\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/%c\\[(.{6})\\]/g, '</span><span style=\"color: #$1\">')\n      .replace(/\\n/g, '<br />') +\n    '</span>'\n  );\n}\n\nfunction range(min: number, max: number, length: number) {\n  if (length === 1) return [min];\n  const res: number[] = [];\n  const gap = (max - min) / (length - 1);\n  let current = min;\n  while (length !== 0) {\n    res.push(current);\n    current += gap;\n    length--;\n  }\n  return res;\n}\n\nexport function generateTimelines(dots: Dot) {\n  const timelines: Frame[][] = [];\n  const frameNum = dots.Length;\n  dots.Entries.forEach(entry => {\n    const timeline: Frame[] = [];\n    let patternPos = 0;\n    for (let t = 0; t <= frameNum; t++) {\n      const pattern = entry.PatternNo[patternPos];\n      const prevFrame = timeline[timeline.length - 1];\n      const frame: Frame = {\n        Sprite: prevFrame\n          ? { ...prevFrame.Sprite }\n          : {\n              X: 0,\n              Y: 0,\n              Width: 0,\n              Height: 0,\n              OriginX: 0,\n              OriginY: 0,\n              ParsedX: 0,\n              ParsedY: 0,\n            },\n        Alpha: 1,\n        Pos: { X: 0, Y: 0 },\n        Scale: { X: 1, Y: 1 },\n      };\n\n      if (\n        pattern &&\n        (pattern.Time === t ||\n          pattern.Time === undefined ||\n          pattern.Time === null)\n      ) {\n        frame.Sprite = {\n          ...entry.Sprites[pattern.Data],\n          ParsedX: 0,\n          ParsedY: 0,\n        };\n        patternPos++;\n      }\n\n      timeline.push(frame);\n      if (pattern && pattern.Time === undefined) break;\n    }\n\n    if (entry.Alpha) {\n      for (let alphaPos = 0; alphaPos < entry.Alpha.length - 1; alphaPos++) {\n        const prevAlpha = entry.Alpha[alphaPos];\n        const nextAlpha = entry.Alpha[alphaPos + 1];\n        const alphas = range(\n          prevAlpha.Data,\n          nextAlpha.Data,\n          nextAlpha.Time - prevAlpha.Time + 1,\n        );\n        for (let t = prevAlpha.Time; t <= nextAlpha.Time; t++) {\n          timeline[t].Alpha = alphas[t - prevAlpha.Time];\n        }\n      }\n      if (entry.Alpha.length === 1) {\n        for (const frame of timeline) {\n          frame.Alpha = entry.Alpha[0].Data;\n        }\n      }\n    }\n\n    if (entry.Pos) {\n      for (let posPos = 0; posPos < entry.Pos.length - 1; posPos++) {\n        const prevPos = entry.Pos[posPos];\n        const nextPos = entry.Pos[posPos + 1];\n        const posesX = range(\n          prevPos.Data.X,\n          nextPos.Data.X,\n          nextPos.Time - prevPos.Time + 1,\n        );\n        const posesY = range(\n          prevPos.Data.Y,\n          nextPos.Data.Y,\n          nextPos.Time - prevPos.Time + 1,\n        );\n\n        for (let t = prevPos.Time; t <= nextPos.Time; t++) {\n          timeline[t].Pos.X = posesX[t - prevPos.Time];\n          timeline[t].Pos.Y = posesY[t - prevPos.Time];\n        }\n      }\n\n      if (entry.Pos.length === 1) {\n        for (const frame of timeline) {\n          frame.Pos = { ...entry.Pos[0].Data };\n        }\n      }\n    }\n\n    if (entry.Scale) {\n      for (let scalePos = 0; scalePos < entry.Scale.length - 1; scalePos++) {\n        const prevScale = entry.Scale[scalePos];\n        const nextScale = entry.Scale[scalePos + 1];\n        const scalesX = range(\n          prevScale.Data.X,\n          nextScale.Data.X,\n          nextScale.Time - prevScale.Time + 1,\n        );\n        const scalesY = range(\n          prevScale.Data.Y,\n          nextScale.Data.Y,\n          nextScale.Time - prevScale.Time + 1,\n        );\n\n        for (let t = prevScale.Time; t <= nextScale.Time; t++) {\n          timeline[t].Scale.X = scalesX[t - prevScale.Time];\n          timeline[t].Scale.Y = scalesY[t - prevScale.Time];\n        }\n      }\n      if (entry.Scale.length === 1) {\n        for (const frame of timeline) {\n          frame.Scale = { ...entry.Scale[0].Data };\n        }\n      }\n    }\n\n    timelines.push(timeline);\n  });\n\n  timelines.forEach(timeline =>\n    timeline.forEach(frame => {\n      frame.Sprite.ParsedX =\n        frame.Sprite.OriginX -\n        frame.Pos.X +\n        (frame.Sprite.Width / 2) * (frame.Scale.X - 1);\n      frame.Sprite.ParsedY =\n        frame.Sprite.OriginY -\n        frame.Pos.Y +\n        frame.Sprite.Height * (frame.Scale.Y - 1);\n    }),\n  );\n\n  return timelines;\n}\n","import { DefaultGetter } from './utils';\nexport const BASE_SERVER_URL = 'https://aigisapi.naberi.us';\n// export const BASE_SERVER_URL = 'http://localhost:4000';\nexport const BASE_GAME_URL = 'http://assets.millennium-war.net';\nexport const GAME_POSTER_URL = BASE_GAME_URL + '/00/html/image';\nexport const API_URL = BASE_SERVER_URL + '/graphql';\nexport const STATIC_URL = BASE_SERVER_URL + '/static';\nexport const PLAYER_DOT_URL = STATIC_URL + '/playerDot';\nexport const ENEMY_DOT_URL = STATIC_URL + '/enemyDot';\nexport const BATTLE_TALK_EVENT_URL = STATIC_URL + '/battleTalkEvent';\nexport const EMOJI_URL = STATIC_URL + '/cqp';\nexport const ICO_URL = STATIC_URL + '/ico';\nexport const BANNER_URL = STATIC_URL + '/banner';\nexport const ENEMY_CHANGE_COND: { [k: number]: string } = {\n  0: '条件切换',\n  1: '阻挡切换',\n  2: '死亡切换',\n  3: '半血切换',\n  4: '一次性攻击切换',\n  5: '血量99%切换',\n};\nexport const BONUS_TYPE = new DefaultGetter({\n  1: 'HP +%d',\n  2: '攻击 +%d',\n  3: '防御 +%d',\n  4: '射程 +%d',\n  5: '魔抗 +%d',\n  6: '后摇 -%d',\n  7: '技能持续 +%d%',\n  8: '技能再动 -%d%',\n  9: '物理攻击回避 +%d%',\n});\n","import React from 'react';\nimport { Spin } from 'antd';\nimport { choose } from '../../utils';\nimport { SpinProps } from 'antd/lib/spin';\n\nconst fuck = ['氆氇', '脱', '包子头', '毛熊', 'ED'];\n\nconst Loading: React.FC<SpinProps> = ({ ...props }) => (\n  <Spin\n    tip={`干${choose(fuck)}中...`}\n    size=\"large\"\n    style={{ marginTop: '20vh', display: 'block' }}\n    {...props}\n  />\n);\n\nexport default Loading;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Layout, Col, Popover, Calendar, Row, Button } from 'antd';\nimport gql from 'graphql-tag';\nimport moment from 'moment';\nimport Card from 'Components/Card';\nimport logo from 'logo.png';\nimport payImage from './pay.png';\nimport styles from './Home.module.less';\nimport { useQuery } from '@apollo/react-hooks';\nimport { BANNER_URL, GAME_POSTER_URL } from 'consts';\nimport classNames from 'classnames';\nimport Loading from 'Components/Loading';\n\nconst { Content } = Layout;\n\nconst Home: React.FC = () => {\n  const [date, setDate] = useState<moment.Moment>();\n  const [selectedDate, setSelectedDate] = useState<moment.Moment>();\n  const { loading, data } = useQuery<{\n    UpdateTime: number;\n    Posters: string[];\n    Banners: string[];\n  }>(\n    gql`\n      query {\n        UpdateTime\n        Posters\n        Banners\n      }\n    `,\n    {\n      onCompleted: d => {\n        if (d.Posters.length > 0) {\n          const posterName = d.Posters[d.Posters.length - 1];\n          setSelectedDate(moment(posterName.slice(5, 13), 'YYYYMMDD'));\n        }\n      },\n    },\n  );\n\n  const posterRef = useRef<HTMLImageElement>(null);\n  const [posterLoading, setPosterLoading] = useState(true);\n\n  useEffect(() => {\n    if (\n      data?.Posters.includes(`event${selectedDate?.format('YYYYMMDD')}.jpg`)\n    ) {\n      setDate(selectedDate);\n    }\n  }, [data, selectedDate]);\n\n  useEffect(() => {\n    if (date && posterRef.current) {\n      posterRef.current.src = `${GAME_POSTER_URL}/event${date.format(\n        'YYYYMMDD',\n      )}.jpg`;\n      setPosterLoading(true);\n    }\n  }, [date]);\n\n  return (\n    <Content className={styles.content + ' container'}>\n      <div className={styles.logoblock}>\n        <img alt=\"logo\" src={logo} className={styles.topLogo} />\n        <h1>Naberius</h1>\n      </div>\n      <Card loading={loading}>\n        {!loading && data && (\n          <div>\n            更新时间：\n            <time>{moment(data.UpdateTime).fromNow()}</time>\n          </div>\n        )}\n      </Card>\n      <Row gutter={16}>\n        <Col xs={24} md={12}>\n          <Card loading={loading} style={{ marginTop: 16 }}>\n            <h2>卡池</h2>\n            {data &&\n              data.Banners.map(bannerName => (\n                <img\n                  alt={bannerName}\n                  key={bannerName}\n                  src={`${BANNER_URL}/${bannerName}`}\n                  style={{ maxWidth: '100%' }}\n                />\n              ))}\n          </Card>\n        </Col>\n        <Col xs={24} md={12}>\n          <Card loading={loading} style={{ marginTop: 16 }}>\n            <h2>海报</h2>\n            <Calendar\n              value={selectedDate || moment()}\n              onChange={value => {\n                setSelectedDate(value);\n              }}\n              fullscreen={false}\n              monthFullCellRender={value => {\n                const first = data?.Posters.find(p =>\n                  p.startsWith(`event${value.format('YYYYMM')}`),\n                );\n                return (\n                  <div className=\"ant-fullcalendar-month\">\n                    <div\n                      className={classNames('ant-fullcalendar-value', {\n                        [styles.calendarMonthDisabled]: !first,\n                      })}\n                      onClick={() =>\n                        first &&\n                        setSelectedDate(moment(first.slice(5, 13), 'YYYYMMDD'))\n                      }\n                    >\n                      {value.localeData().monthsShort(value)}\n                    </div>\n                  </div>\n                );\n              }}\n              disabledDate={value => {\n                if (data) {\n                  for (const posterName of data.Posters) {\n                    if (posterName === `event${value.format('YYYYMMDD')}.jpg`)\n                      return false;\n                  }\n                }\n                return true;\n              }}\n            />\n            <Loading spinning={posterLoading}>\n              {date && (\n                <img\n                  ref={posterRef}\n                  onLoad={() => setPosterLoading(false)}\n                  alt={date.format('YYYY/MM/DD')}\n                  style={{ width: '100%' }}\n                />\n              )}\n            </Loading>\n          </Card>\n        </Col>\n      </Row>\n      <div className={styles.beg}>\n        <Popover\n          placement=\"top\"\n          trigger=\"click\"\n          content={\n            <img\n              alt=\"唯一指定邮箱minalinskyx#hotmail.com，您pay吗\"\n              src={payImage}\n              width={500}\n            />\n          }\n        >\n          <Button type=\"primary\">\n            给魔狗买一杯\n            <span role=\"img\" aria-label=\"coffee\">\n              ☕️\n            </span>\n          </Button>\n        </Popover>\n      </div>\n    </Content>\n  );\n};\n\nexport default Home;\n","import React from 'react';\n\nconst Rarity: React.FC<{ rare: number }> = ({ rare }) => {\n  switch (rare) {\n    case 0:\n      return <span style={{ color: 'grey' }}>★</span>;\n    case 1:\n      return <span style={{ color: 'brown' }}>★★</span>;\n    case 2:\n      return <span style={{ color: 'silver' }}>★★★</span>;\n    case 3:\n      return <span style={{ color: 'gold' }}>★★★★</span>;\n    case 4:\n      return <span>☆☆☆☆☆</span>;\n    case 5:\n      return <span style={{ color: 'black' }}>★★★★★★</span>;\n    case 7:\n      return <span style={{ color: 'blue' }}>SAPPHIRE</span>;\n    case 10:\n      return <span style={{ textShadow: '0 0 1px deepskyblue' }}>☆☆☆☆☆</span>;\n    case 11:\n      return (\n        <span style={{ textShadow: '0 0 1px gold', color: 'black' }}>\n          ★★★★★★\n        </span>\n      );\n    default:\n      return <span>UNKNOWN</span>;\n  }\n};\n\nexport default Rarity;\n","import React from 'react';\nimport { Row, Col, Tag } from 'antd';\nimport Rarity from '../../Rarity';\nimport styles from './UnitList.module.less';\nimport { ICO_URL } from '../../../consts';\nimport { Card } from './types';\nimport classNames from 'classnames';\n\ninterface UnitListCardProps {\n  card: Card;\n  showUnit: (cardID: number) => void;\n  setFilter: (search: string, searchType: string) => void;\n  style?: React.CSSProperties;\n}\n\ninterface FormFields {\n  nickName: string;\n  conneName: string;\n}\n\nconst UnitListCard: React.FC<UnitListCardProps> = ({\n  card,\n  showUnit,\n  setFilter,\n  style,\n}) => {\n  return (\n    <div\n      style={style}\n      className={classNames(styles.listCard, {\n        [styles.male]: card.Kind === 1,\n        [styles.female]: card.Kind === 0,\n      })}\n    >\n      <Row\n        type=\"flex\"\n        style={{ alignItems: 'center' }}\n        onClick={() => showUnit(card.CardID)}\n      >\n        <Col md={2} xs={3}>\n          {card.CardID}\n        </Col>\n        <Col md={2} xs={5}>\n          <img\n            src={`${ICO_URL}/0/${card.CardID}.png`}\n            alt={card.CardID.toString()}\n            height=\"48\"\n          />\n        </Col>\n        <Col md={4} xs={16}>\n          <Rarity rare={card.Rare} />\n          <br />\n          {card.Name}\n        </Col>\n        <Col lg={6} xs={0}>\n          {card.RaceName && (\n            <span\n              onClick={e => {\n                e.stopPropagation();\n                setFilter(card.RaceName, 'RaceName');\n              }}\n            >\n              <Tag>{card.RaceName}</Tag>\n            </span>\n          )}\n          {card.AssignName && (\n            <span\n              onClick={e => {\n                e.stopPropagation();\n                setFilter(card.AssignName, 'AssignName');\n              }}\n            >\n              <Tag color=\"magenta\">{card.AssignName}</Tag>\n            </span>\n          )}\n          {card.IdentityName && (\n            <span\n              onClick={e => {\n                e.stopPropagation();\n                setFilter(card.IdentityName, 'IdentityName');\n              }}\n            >\n              <Tag color=\"black\">{card.IdentityName}</Tag>\n            </span>\n          )}\n        </Col>\n        <Col\n          lg={5}\n          md={8}\n          xs={0}\n          className=\"filter\"\n          onClick={e => {\n            e.stopPropagation();\n            setFilter(card.Classes[0].Name, 'Classes.0.Name');\n          }}\n        >\n          {card.Classes[0].Name}\n        </Col>\n        <Col\n          lg={5}\n          md={8}\n          xs={0}\n          className=\"filter\"\n          onClick={e => {\n            e.stopPropagation();\n            setFilter(card.IllustName, 'IllustName');\n          }}\n        >\n          {card.IllustName}\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default UnitListCard;\n","import gql from 'graphql-tag';\n\nexport const DotFragment = gql`\n  fragment Dot on Dot {\n    Name\n    Length\n    Entries {\n      Sprites {\n        X\n        Y\n        Width\n        Height\n        OriginX\n        OriginY\n      }\n      PatternNo {\n        Time\n        Data\n      }\n      Pos {\n        Time\n        Data {\n          X\n          Y\n        }\n      }\n      Scale {\n        Time\n        Data {\n          X\n          Y\n        }\n      }\n      Alpha {\n        Time\n        Data\n      }\n    }\n  }\n`;\n\nexport const MissileFragment = gql`\n  fragment missile on Missile {\n    MissileID\n    PatternID\n    Enemy\n    Speed\n    SlowTime\n    SlowRate\n    DamageArea\n    Property\n  }\n`;\n\nexport const EnemyFragment = gql`\n  fragment enemy on Enemy {\n    HitEffect\n    MissileID\n    DeadEffect\n    SpecialEffect\n    PatternID\n    Weather\n    HP\n    HP_MAX\n    ATTACK_POWER\n    TypeAttack\n    ATTACK_RANGE\n    ATTACK_SPEED\n    ARMOR_DEFENSE\n    MAGIC_DEFENSE\n    MOVE_SPEED\n    SKILL\n    SkyFlag\n    GainCost\n    EffectHeight\n    MagicAttack\n    AttackWait\n    MissileID\n    Missile {\n      ...missile\n    }\n    DeadEffect\n    Param_ResistanceAssassin\n    Param_ChangeParam\n    Param_ChangeCondition\n    SpecialtyConfigs {\n      Type_Influence\n      Param_1\n      Param_2\n      Param_3\n      Param_4\n      _Expression\n      _ExtParam\n    }\n    EnemyElem {\n      _EnemyElementName\n    }\n    EnemyType {\n      _EnemyTypeName\n    }\n    Dots {\n      ...Dot\n    }\n    _Attribute\n  }\n  ${MissileFragment}\n`;\n","import gql from 'graphql-tag';\nimport { Card } from 'interfaces';\nimport { DotFragment, MissileFragment } from 'fragments';\n\nexport interface Data {\n  Card: Card;\n}\n\nexport const query = gql`\n  query($id: Int!) {\n    Card(CardID: $id) {\n      CardID\n      _AwakePattern\n      HarlemTextR\n      HarlemTextA\n      Name\n      Rare\n      Kind\n      MaxHPMod\n      AtkMod\n      DefMod\n      CostModValue\n      CostDecValue\n      MagicResistance\n      BonusType\n      BonusNum\n      BonusType2\n      BonusNum2\n      BonusType3\n      BonusNum3\n      RaceName\n      AssignName\n      IdentityName\n      IllustName\n      HomeCooking\n      SellPrice\n      BuildExp\n      _TradePoint\n      ConneName\n      NickNames\n      Dots {\n        ...Dot\n      }\n      Classes {\n        AttackAttribute\n        Missile {\n          ...missile\n        }\n        Cards {\n          Rare\n          CardID\n          Name\n        }\n        Type\n        ClassID\n        Name\n        InitHP\n        MaxHP\n        InitDef\n        MaxDef\n        InitAtk\n        MaxAtk\n        AtkArea\n        BlockNum\n        MaxLevel\n        Explanation\n        Cost\n        NickNames\n        Data_ExtraAwakeOrbs {\n          Name\n        }\n        AttackWait\n        ClassAbilityConfigs {\n          _InvokeType\n          _TargetType\n          _InfluenceType\n          _Param1\n          _Param2\n          _Param3\n          _Param4\n          _Command\n          _ActivateCommand\n          # Description\n        }\n        ClassAbilityPower1\n        BattleStyle {\n          Data_ID\n          Type_BattleStyle\n          _Param_01\n          _Param_02\n          _Range_01\n          _Range_02\n          _Range_03\n          _Range_04\n          _Range_05\n        }\n      }\n      ImageCG\n      ImageStand\n      Abilities {\n        Cards {\n          Rare\n          CardID\n          Name\n        }\n        Type\n        AbilityID\n        Text\n        AbilityName\n        Configs {\n          _InvokeType\n          _TargetType\n          _InfluenceType\n          _Param1\n          _Param2\n          _Param3\n          _Param4\n          _Command\n          _ActivateCommand\n          # Description\n        }\n      }\n      ClassLV0SkillID\n      ClassLV1SkillID\n      Skills {\n        Type\n        Skills {\n          SkillName\n          WaitTime\n          ContTimeMax\n          PowerMax\n          LevelMax\n          Text\n          SkillID\n          Cards {\n            Rare\n            Name\n            CardID\n          }\n          Configs {\n            Type_Collision\n            Type_CollisionState\n            Type_ChangeFunction\n            Data_Target\n            Data_InfluenceType\n            Data_MulValue\n            Data_MulValue2\n            Data_MulValue3\n            Data_AddValue\n            _HoldRatioUpperLimit\n            _Expression\n            _ExpressionActivate\n            # Description\n          }\n        }\n      }\n    }\n  }\n  ${DotFragment}\n  ${MissileFragment}\n`;\n","import React from 'react';\n\nconst Gender: React.FC<{ gender: number }> = ({ gender }) => {\n  if (gender === 0) {\n    return <span style={{ color: 'blue' }}>♂</span>;\n  } else if (gender === 1) {\n    return <span style={{ color: 'red' }}>♀</span>;\n  }\n  return null;\n};\n\nexport default Gender;\n","import React, { useState } from 'react';\nimport styles from './SkillTable.module.less';\nimport { Button, Row, Col } from 'antd';\nimport { renderDescription } from '../../utils';\nimport { SkillData } from 'interfaces';\nimport MediaContext from 'context/MediaContext';\nimport { Link } from 'react-router-dom';\nimport { ICO_URL } from 'consts';\n\nconst SKILL_TYPE = {\n  Init: '初始',\n  CC: 'CC',\n  Evo: '技觉',\n};\n\nconst SkillTableRows: React.FC<{ skill: SkillData }> = ({ skill }) => {\n  const [showConfigs, setShowConfigs] = useState(false);\n  const { isTabletOrMobile } = MediaContext.useContainer();\n  const secondRow = (\n    <>\n      <td>{skill.LevelMax}</td>\n      <td>{skill.ContTimeMax}</td>\n      <td>{skill.WaitTime}</td>\n      <td>{skill.PowerMax}</td>\n      <td>\n        <Button\n          type=\"primary\"\n          size=\"small\"\n          onClick={() => setShowConfigs(!showConfigs)}\n          icon={showConfigs ? 'up' : 'down'}\n        />\n      </td>\n    </>\n  );\n  return (\n    <React.Fragment>\n      <tr>\n        <th colSpan={isTabletOrMobile ? 2 : 1}>\n          <small>#{skill.SkillID}</small>\n          {skill.SkillName}\n        </th>\n        <td\n          colSpan={isTabletOrMobile ? 3 : 1}\n          style={{ textAlign: 'left' }}\n          dangerouslySetInnerHTML={{\n            __html: renderDescription(skill.Text),\n          }}\n        />\n        {!isTabletOrMobile && secondRow}\n      </tr>\n      {isTabletOrMobile && <tr>{secondRow}</tr>}\n      {showConfigs && (\n        <tr>\n          <td colSpan={isTabletOrMobile ? 5 : 7}>\n            <Row gutter={8}>\n              <Col xs={24} md={12}>\n                <table\n                  className={styles.table}\n                  style={{ tableLayout: 'fixed' }}\n                >\n                  <tbody>\n                    <tr>\n                      <th style={{ width: '6em' }}>拥有的卡</th>\n                      <td>\n                        {skill.Cards.sort((c1, c2) => c2.Rare - c1.Rare).map(\n                          card => (\n                            <Link key={card.CardID} to={`/unit/${card.CardID}`}>\n                              <img\n                                alt={card.CardID.toString()}\n                                style={{ width: 40, marginLeft: 8 }}\n                                src={`${ICO_URL}/0/${card.CardID}.png`}\n                              />\n                              {card.Name}\n                            </Link>\n                          ),\n                        )}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </Col>\n              <Col xs={24} md={12}>\n                <table\n                  className={styles.table}\n                  style={{ tableLayout: 'fixed' }}\n                >\n                  <thead>\n                    <tr>\n                      <th>类型</th>\n                      <th>効果</th>\n                      <th>差分</th>\n                      <th>固定</th>\n                      <th>加算</th>\n                      <th>冲突</th>\n                      <th>状态</th>\n                      <th>对象</th>\n                    </tr>\n                    <tr>\n                      <th colSpan={4}>条件</th>\n                      <th colSpan={4}>发动条件</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {skill.Configs.map((config, index) => (\n                      <React.Fragment key={index}>\n                        <tr\n                          style={{\n                            borderBottom:\n                              config._ExpressionActivate !== '' ||\n                              config._Expression !== ''\n                                ? 'none'\n                                : '2px solid #e8e8e8',\n                          }}\n                        >\n                          <td>{config.Data_InfluenceType}</td>\n                          <td>{config.Data_MulValue}</td>\n                          <td>{config.Data_MulValue2}</td>\n                          <td>{config.Data_MulValue3}</td>\n                          <td>{config.Data_AddValue}</td>\n                          <td>{config.Type_Collision}</td>\n                          <td>{config.Type_CollisionState}</td>\n                          <td>{config.Data_Target}</td>\n                        </tr>\n                        {(config._ExpressionActivate !== '' ||\n                          config._Expression !== '') && (\n                          <tr style={{ borderBottom: '2px solid #e8e8e8' }}>\n                            <td\n                              colSpan={4}\n                              style={{\n                                wordWrap: 'break-word',\n                              }}\n                            >\n                              {config._Expression}\n                            </td>\n                            <td\n                              colSpan={4}\n                              style={{\n                                wordWrap: 'break-word',\n                              }}\n                            >\n                              {config._ExpressionActivate}\n                            </td>\n                          </tr>\n                        )}\n                      </React.Fragment>\n                    ))}\n                  </tbody>\n                </table>\n              </Col>\n            </Row>\n          </td>\n        </tr>\n      )}\n    </React.Fragment>\n  );\n};\n\nconst SkillTable: React.FC<{\n  skills: SkillData[];\n  type?: keyof typeof SKILL_TYPE;\n}> = ({ skills, type }) => {\n  const { isTabletOrMobile } = MediaContext.useContainer();\n  return (\n    <table className={styles.table}>\n      <thead>\n        {type && (\n          <tr>\n            <td colSpan={7}>{SKILL_TYPE[type]}</td>\n          </tr>\n        )}\n        <tr>\n          {!isTabletOrMobile && (\n            <>\n              <td style={{ width: 200 }} />\n              <th>描述</th>\n            </>\n          )}\n          <th style={{ width: isTabletOrMobile ? '20%' : 60 }}>等级</th>\n          <th style={{ width: isTabletOrMobile ? '20%' : 60 }}>持续</th>\n          <th style={{ width: isTabletOrMobile ? '20%' : 60 }}>再动</th>\n          <th style={{ width: isTabletOrMobile ? '20%' : 60 }}>强度</th>\n          <th style={{ width: isTabletOrMobile ? '20%' : 60 }}>详细</th>\n        </tr>\n      </thead>\n      <tbody>\n        {skills.map((skill, index) => (\n          <SkillTableRows key={index} skill={skill} />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default SkillTable;\n","import React, { useState } from 'react';\nimport styles from './AbilityTable.module.less';\nimport { renderDescription } from '../../utils';\nimport { Button, Row, Col } from 'antd';\nimport { AbilityData } from 'interfaces';\nimport MediaContext from 'context/MediaContext';\nimport { Link } from 'react-router-dom';\nimport { ICO_URL } from 'consts';\n\nconst ABILITY_TYPE = {\n  Init: '初始',\n  Evo: '觉醒',\n};\n\nconst AbilityTable: React.FC<{ ability: AbilityData }> = ({ ability }) => {\n  const { isTabletOrMobile } = MediaContext.useContainer();\n  const [showConfigs, setShowConfigs] = useState(false);\n  return (\n    <table className={styles.table}>\n      <tbody>\n        {isTabletOrMobile && ability.Type && (\n          <tr>\n            <td colSpan={3}>{ABILITY_TYPE[ability.Type]}</td>\n          </tr>\n        )}\n        {!isTabletOrMobile && (\n          <tr>\n            <td>{ABILITY_TYPE[ability.Type]}</td>\n            <th>描述</th>\n            <th>详细</th>\n          </tr>\n        )}\n        <tr>\n          <th style={{ width: '30%' }}>\n            <small>#{ability.AbilityID}</small>\n            {ability.AbilityName}\n          </th>\n          <td\n            style={{ textAlign: 'left' }}\n            dangerouslySetInnerHTML={{\n              __html: renderDescription(ability.Text),\n            }}\n          />\n          <td style={{ width: 50 }}>\n            <Button\n              type=\"primary\"\n              size=\"small\"\n              onClick={() => setShowConfigs(!showConfigs)}\n              icon={showConfigs ? 'up' : 'down'}\n            />\n          </td>\n        </tr>\n        {showConfigs && (\n          <tr>\n            <td colSpan={3}>\n              <Row gutter={8}>\n                <Col xs={24} md={12}>\n                  <table\n                    className={styles.table}\n                    style={{\n                      tableLayout: 'fixed',\n                    }}\n                  >\n                    <tbody>\n                      <tr>\n                        <th style={{ width: '6em' }}>拥有的卡</th>\n                        <td>\n                          {ability.Cards.sort(\n                            (c1, c2) => c2.Rare - c1.Rare,\n                          ).map(card => (\n                            <Link key={card.CardID} to={`/unit/${card.CardID}`}>\n                              <img\n                                alt={card.CardID.toString()}\n                                style={{ width: 40, marginLeft: 8 }}\n                                src={`${ICO_URL}/0/${card.CardID}.png`}\n                              />\n                              {card.Name}\n                            </Link>\n                          ))}\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </Col>\n                <Col xs={24} md={12}>\n                  <table\n                    className={styles.table}\n                    style={{\n                      tableLayout: 'fixed',\n                    }}\n                  >\n                    <thead>\n                      <tr>\n                        <th>类型</th>\n                        <th>p1</th>\n                        <th>p2</th>\n                        <th>p3</th>\n                        <th>p4</th>\n                        <th>发动</th>\n                        <th>对象</th>\n                      </tr>\n                      <tr>\n                        <th colSpan={3}>条件</th>\n                        <th colSpan={4}>发动条件</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {ability.Configs.map((config, index) => (\n                        <React.Fragment key={index}>\n                          <tr\n                            style={{\n                              borderBottom:\n                                config._Command !== '' ||\n                                config._ActivateCommand !== ''\n                                  ? 'none'\n                                  : '2px solid #e8e8e8',\n                            }}\n                          >\n                            <td>{config._InfluenceType}</td>\n                            <td>{config._Param1}</td>\n                            <td>{config._Param2}</td>\n                            <td>{config._Param3}</td>\n                            <td>{config._Param4}</td>\n                            <td>{config._InvokeType}</td>\n                            <td>{config._TargetType}</td>\n                          </tr>\n                          {(config._Command !== '' ||\n                            config._ActivateCommand !== '') && (\n                            <tr style={{ borderBottom: '2px solid #e8e8e8' }}>\n                              <td\n                                colSpan={3}\n                                style={{\n                                  wordWrap: 'break-word',\n                                }}\n                              >\n                                {config._Command}\n                              </td>\n                              <td\n                                colSpan={4}\n                                style={{\n                                  wordWrap: 'break-word',\n                                }}\n                              >\n                                {config._ActivateCommand}\n                              </td>\n                            </tr>\n                          )}\n                        </React.Fragment>\n                      ))}\n                    </tbody>\n                  </table>\n                </Col>\n              </Row>\n            </td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  );\n};\n\nexport default AbilityTable;\n","import React from 'react';\r\nimport { Missile } from 'interfaces';\r\nimport styles from './MissileTable.module.less';\r\nimport MediaContext from 'context/MediaContext';\r\n\r\nconst MissileTable: React.FC<{\r\n  missile: Missile;\r\n  compact?: boolean;\r\n}> = ({ missile, compact = false }) => {\r\n  const { isTabletOrMobile } = MediaContext.useContainer();\r\n  const isCompact = isTabletOrMobile || compact;\r\n  return (\r\n    <table className={styles.table} style={{ tableLayout: 'fixed' }}>\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>点阵</th>\r\n          <th>是否敌人</th>\r\n          <th>速度</th>\r\n          <th>减速时间</th>\r\n          <th>减速比例</th>\r\n          <th>溅射</th>\r\n          {!isCompact && <th>属性</th>}\r\n        </tr>\r\n        {!!(isCompact && missile.Property) && (\r\n          <tr>\r\n            <th colSpan={7}>属性</th>\r\n          </tr>\r\n        )}\r\n      </thead>\r\n      <tbody>\r\n        <tr>\r\n          <td>{missile.MissileID}</td>\r\n          <td>{missile.PatternID.toString(16)}</td>\r\n          <td>{missile.Enemy ? '是' : '否'}</td>\r\n          <td>{missile.Speed}</td>\r\n          <td>{missile.SlowTime}</td>\r\n          <td>{missile.SlowRate}</td>\r\n          <td>{missile.DamageArea}</td>\r\n          {!isCompact && <td>{missile.Property}</td>}\r\n        </tr>\r\n        {!!(missile.Property && isCompact) && (\r\n          <tr>\r\n            <td colSpan={7}>{missile.Property}</td>\r\n          </tr>\r\n        )}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default MissileTable;\r\n","import React, { useState, useEffect, useRef } from 'react';\nimport styles from './ClassTable.module.less';\nimport { renderDescription } from '../../utils';\nimport { Button, Row, Col, Select, Spin, Tag, message } from 'antd';\nimport { ClassData } from 'interfaces';\nimport MediaContext from 'context/MediaContext';\nimport { Link } from 'react-router-dom';\nimport { ICO_URL } from 'consts';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport MissileTable from 'Components/MissileTable';\n\nconst CLASS_TYPE = {\n  Init: '初始',\n  CC: 'CC',\n  Evo: '觉醒',\n  Evo2a: '二觉A',\n  Evo2b: '二觉B',\n};\n\nconst ClassTable: React.FC<{\n  classData: ClassData;\n  onCompleted?: () => any;\n}> = ({ classData, onCompleted }) => {\n  const [showConfigs, setShowConfigs] = useState(false);\n\n  const { isTabletOrMobile } = MediaContext.useContainer();\n\n  const [setClassMeta, { loading }] = useMutation(\n    gql`\n      mutation($ClassID: Int!, $NickNames: [String!]!) {\n        ClassMeta(ClassID: $ClassID, NickNames: $NickNames) {\n          NickNames\n        }\n      }\n    `,\n    { onCompleted },\n  );\n\n  const [value, setValue] = useState(classData.NickNames || []);\n  const [editing, setEditing] = useState(false);\n  const ref = useRef<Select<string[]>>(null);\n\n  useEffect(() => {\n    if (editing && ref.current) {\n      ref.current.focus();\n    }\n  }, [editing]);\n\n  const handleSave = async () => {\n    await setClassMeta({\n      variables: { ClassID: classData.ClassID, NickNames: value },\n    });\n    message.success('修改成功');\n    setEditing(false);\n  };\n\n  return (\n    <table className={styles.table}>\n      <tbody>\n        {isTabletOrMobile && classData.Type && (\n          <tr>\n            <td colSpan={isTabletOrMobile ? 3 : 5}>\n              {CLASS_TYPE[classData.Type]}\n            </td>\n          </tr>\n        )}\n        <tr>\n          {!isTabletOrMobile && (\n            <>\n              <td style={{ width: 200 }}>{CLASS_TYPE[classData.Type]}</td>\n              <th>描述</th>\n            </>\n          )}\n          <th style={{ width: isTabletOrMobile ? '33.33%' : 100 }}>后摇</th>\n          <th style={{ width: isTabletOrMobile ? '33.33%' : 100 }}>被动</th>\n          <th style={{ width: isTabletOrMobile ? '33.33%' : 100 }}>详细</th>\n        </tr>\n        <tr>\n          <th>\n            <small>#{classData.ClassID}</small>\n            {classData.Name}\n          </th>\n          <td\n            colSpan={isTabletOrMobile ? 2 : 1}\n            style={{ textAlign: 'left' }}\n            dangerouslySetInnerHTML={{\n              __html: renderDescription(classData.Explanation),\n            }}\n          />\n          {!isTabletOrMobile && (\n            <>\n              <td>{classData.AttackWait}</td>\n              <td>{classData.ClassAbilityPower1}</td>\n              <td>\n                <Button\n                  type=\"primary\"\n                  size=\"small\"\n                  onClick={() => setShowConfigs(!showConfigs)}\n                  icon={showConfigs ? 'up' : 'down'}\n                />\n              </td>\n            </>\n          )}\n        </tr>\n        {isTabletOrMobile && (\n          <tr>\n            <td>{classData.AttackWait}</td>\n            <td>{classData.ClassAbilityPower1}</td>\n            <td>\n              <Button\n                type=\"primary\"\n                size=\"small\"\n                onClick={() => setShowConfigs(!showConfigs)}\n                icon={showConfigs ? 'up' : 'down'}\n              />\n            </td>\n          </tr>\n        )}\n        {showConfigs && (\n          <tr>\n            <td colSpan={isTabletOrMobile ? 3 : 5}>\n              <Row gutter={8}>\n                <Col xs={24} md={12}>\n                  <table\n                    style={{\n                      tableLayout: 'fixed',\n                    }}\n                    className={styles.table}\n                  >\n                    <tbody>\n                      <tr>\n                        <th style={{ width: '6em' }}>昵称</th>\n                        <td>\n                          {editing ? (\n                            <Spin spinning={loading}>\n                              <Select<string[]>\n                                mode=\"tags\"\n                                tokenSeparators={[',', ' ']}\n                                ref={ref}\n                                value={value}\n                                onChange={v => setValue(v)}\n                                onBlur={handleSave}\n                                style={{ width: '100%' }}\n                              />\n                            </Spin>\n                          ) : (\n                            <div\n                              onClick={() => setEditing(true)}\n                              className={styles.fakeInput}\n                            >\n                              {classData.NickNames &&\n                                classData.NickNames.map((name, index) => (\n                                  <Tag key={index}>{name}</Tag>\n                                ))}\n                            </div>\n                          )}\n                        </td>\n                      </tr>\n                      <tr>\n                        <th>拥有的卡</th>\n                        <td>\n                          {classData.Cards.sort(\n                            (c1, c2) => c2.Rare - c1.Rare,\n                          ).map(card => (\n                            <Link key={card.CardID} to={`/unit/${card.CardID}`}>\n                              <img\n                                alt={card.CardID.toString()}\n                                style={{ width: 40, marginLeft: 8 }}\n                                src={`${ICO_URL}/0/${card.CardID}.png`}\n                              />\n                              {card.Name}\n                            </Link>\n                          ))}\n                        </td>\n                      </tr>\n                      <tr>\n                        <th>职业类型</th>\n                        <td>{classData.AttackAttribute}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n\n                  {classData.Missile && (\n                    <MissileTable missile={classData.Missile} compact />\n                  )}\n                </Col>\n                <Col xs={24} md={12}>\n                  <table\n                    className={styles.table}\n                    style={{\n                      tableLayout: 'fixed',\n                    }}\n                  >\n                    <thead>\n                      <tr>\n                        <th>类型</th>\n                        <th>p1</th>\n                        <th>p2</th>\n                        <th>p3</th>\n                        <th>p4</th>\n                        <th>发动</th>\n                        <th>对象</th>\n                      </tr>\n                      <tr>\n                        <th colSpan={3}>条件</th>\n                        <th colSpan={4}>发动条件</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {classData.ClassAbilityConfigs.map((config, index) => (\n                        <React.Fragment key={index}>\n                          <tr\n                            style={{\n                              borderBottom:\n                                config._Command || config._ActivateCommand\n                                  ? undefined\n                                  : '2px solid #e8e8e8',\n                            }}\n                          >\n                            <td>{config._InfluenceType}</td>\n                            <td>{config._Param1}</td>\n                            <td>{config._Param2}</td>\n                            <td>{config._Param3}</td>\n                            <td>{config._Param4}</td>\n                            <td>{config._InvokeType}</td>\n                            <td>{config._TargetType}</td>\n                          </tr>\n                          {(config._Command || config._ActivateCommand) && (\n                            <tr style={{ borderBottom: '2px solid #e8e8e8' }}>\n                              <td\n                                colSpan={3}\n                                style={{\n                                  wordWrap: 'break-word',\n                                }}\n                              >\n                                {config._Command}\n                              </td>\n                              <td\n                                colSpan={4}\n                                style={{\n                                  wordWrap: 'break-word',\n                                }}\n                              >\n                                {config._ActivateCommand}\n                              </td>\n                            </tr>\n                          )}\n                        </React.Fragment>\n                      ))}\n                    </tbody>\n                  </table>\n                </Col>\n              </Row>\n            </td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  );\n};\n\nexport default ClassTable;\n","import React, { useEffect, useRef } from 'react';\nimport { Tooltip } from 'antd';\nimport { PLAYER_DOT_URL, ENEMY_DOT_URL } from '../../consts';\nimport { Dot } from '../../interfaces';\nimport { generateTimelines } from '../../utils';\nimport * as GIF from 'gif.js';\n\ninterface DotAnimationProps {\n  dot: Dot;\n  CardID: number;\n  type: 'Player' | 'Enemy';\n}\n\nconst DotAnimation: React.FC<DotAnimationProps> = ({ dot, CardID, type }) => {\n  const canvas = useRef<HTMLCanvasElement>();\n  // const tempCanvas = useRef<HTMLCanvasElement>();\n  const gif = useRef<any>();\n  useEffect(() => {\n    let top = 0;\n    let bottom = 65536;\n    let left = 0;\n    let right = 65536;\n    let canvasWidth = 0;\n    let canvasHeight = 0;\n    const tickNum: number = dot.Length;\n\n    const timelines = generateTimelines(dot);\n\n    timelines.forEach(timeline => {\n      timeline.forEach(frame => {\n        left = Math.max(left, frame.Sprite.ParsedX);\n        right = Math.min(\n          right,\n          frame.Sprite.ParsedX - frame.Sprite.Width * frame.Scale.X,\n        );\n\n        top = Math.max(top, frame.Sprite.ParsedY);\n        bottom = Math.min(\n          bottom,\n          frame.Sprite.ParsedY - frame.Sprite.Height * frame.Scale.Y,\n        );\n      });\n    });\n\n    canvasWidth = left - right;\n    canvasHeight = top - bottom;\n\n    canvas.current!.width = canvasWidth;\n    canvas.current!.height = canvasHeight;\n\n    // load image\n    const imageObj = new Image();\n    imageObj.crossOrigin = 'anonymous';\n    imageObj.src = `${\n      type === 'Player' ? PLAYER_DOT_URL : ENEMY_DOT_URL\n    }/${CardID}/sprite.png`;\n\n    const ctx = canvas.current!.getContext('2d') as CanvasRenderingContext2D;\n\n    let currentTick = 0;\n\n    gif.current = new GIF({\n      workers: 2,\n      quality: 1,\n      workerScript: '/gif.worker.js',\n      width: canvasWidth,\n      height: canvasHeight,\n      transparent: 'rgba(0,0,0,0)',\n    }).on('finished', (blob: Blob) => {\n      // crate a anchor\n      const url: string = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.style.display = 'none';\n      a.download = `${CardID}-${dot.Name}.gif`;\n      // and click it\n      a.click();\n    });\n\n    let gifStatus = true;\n    let frameId: number | undefined;\n    const imageLoop = () => {\n      // request next tick\n      if (timelines.length !== 0 && timelines[0].length !== 1)\n        frameId = window.requestAnimationFrame(imageLoop);\n\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n      timelines.forEach(timeline => {\n        const frame = timeline[currentTick];\n        const sprite = frame.Sprite;\n        // set alpha\n        ctx.globalAlpha = frame.Alpha;\n        // draw image\n        ctx.drawImage(\n          imageObj,\n          sprite.X,\n          sprite.Y,\n          sprite.Width,\n          sprite.Height,\n          left - sprite.ParsedX,\n          top - sprite.ParsedY,\n          sprite.Width * frame.Scale.X,\n          sprite.Height * frame.Scale.Y,\n        );\n        // restore alpha\n        ctx.globalAlpha = 1;\n      });\n\n      if (gifStatus && currentTick % 2 === 0) {\n        gif.current!.addFrame(ctx, {\n          copy: true,\n          delay: 1000 / 30,\n        });\n      }\n\n      currentTick++;\n\n      if (currentTick > tickNum) {\n        currentTick = 0;\n        gifStatus = false;\n      }\n    };\n\n    imageObj.onload = imageLoop;\n\n    return () => {\n      const cv = canvas.current!;\n      const context = cv.getContext('2d')!;\n      context.clearRect(0, 0, cv.width, cv.height);\n      if (frameId) {\n        window.cancelAnimationFrame(frameId);\n      }\n      imageObj.onload = null;\n      gif.current = null;\n    };\n  }, [dot, CardID, type]);\n\n  return (\n    <div>\n      <Tooltip title=\"点击下载gif\">\n        <canvas\n          ref={ref => ref && (canvas.current = ref)}\n          onClick={() => {\n            gif.current.render();\n          }}\n        />\n      </Tooltip>\n    </div>\n  );\n};\n\nexport default DotAnimation;\n","import React, { useState } from 'react';\nimport { Dot } from 'interfaces';\nimport DotAnimation from 'Components/DotAnimation';\nimport styles from './DotTable.module.less';\nimport { Button } from 'antd';\nimport { PLAYER_DOT_URL, ENEMY_DOT_URL } from 'consts';\n\nconst DotTable: React.FC<{\n  dot: Dot;\n  CardID: number;\n  type: 'Player' | 'Enemy';\n}> = ({ dot, CardID, type }) => {\n  const [showConfigs, setShowConfigs] = useState(false);\n  return (\n    <table className={styles.table}>\n      <thead>\n        <tr>\n          <th colSpan={3}>{dot.Name}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td style={{ width: 100 }}>{dot.Length}f</td>\n          <td>\n            <DotAnimation type={type} dot={dot} CardID={CardID} />\n          </td>\n          <td style={{ width: 100 }}>\n            <Button\n              type=\"primary\"\n              size=\"small\"\n              onClick={() => setShowConfigs(!showConfigs)}\n              icon={showConfigs ? 'up' : 'down'}\n            />\n          </td>\n        </tr>\n        {showConfigs && (\n          <tr>\n            <td colSpan={3}>\n              {dot.Entries.map((entry, entryIndex) => (\n                <div key={entryIndex}>\n                  {entry.Sprites.map((sprite, index) => {\n                    return (\n                      <div\n                        key={`${entryIndex}-${index}`}\n                        style={{\n                          display: 'inline-block',\n                          width: sprite.Width,\n                          height: sprite.Height,\n                          backgroundImage: `url(\"${\n                            type === 'Player' ? PLAYER_DOT_URL : ENEMY_DOT_URL\n                          }/${CardID}/sprite.png\")`,\n                          backgroundPositionX: -sprite.X,\n                          backgroundPositionY: -sprite.Y,\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n              ))}\n            </td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  );\n};\n\nexport default DotTable;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { Spin, Input, message } from 'antd';\nimport styles from './Unit.module.less';\n\nconst ConneNameInput: React.FC<{\n  ConneName: string;\n  CardID: number;\n  onCompleted?: () => any;\n}> = ({ ConneName, CardID, onCompleted }) => {\n  const [setCardMeta, { loading: setCardMetaLoading }] = useMutation<{\n    CardMeta: { ConneName?: string; NickNames?: string[] };\n  }>(\n    gql`\n      mutation($CardID: Int!, $ConneName: String, $NickNames: [String!]) {\n        CardMeta(\n          CardID: $CardID\n          ConneName: $ConneName\n          NickNames: $NickNames\n        ) {\n          ConneName\n          NickNames\n        }\n      }\n    `,\n    { onCompleted },\n  );\n  const [editing, setEditing] = useState(false);\n  const [value, setValue] = useState(ConneName);\n  const ref = useRef<Input>(null);\n\n  useEffect(() => {\n    if (editing && ref.current) {\n      ref.current.focus();\n    }\n  }, [editing]);\n\n  const handleSave = async () => {\n    const resp = await setCardMeta({\n      variables: { CardID, ConneName: value },\n    });\n    console.log(resp);\n    message.success('修改成功');\n    setEditing(false);\n  };\n\n  return editing ? (\n    <Spin spinning={setCardMetaLoading}>\n      <Input\n        ref={ref}\n        value={value}\n        onChange={e => setValue(e.target.value)}\n        onBlur={handleSave}\n        onPressEnter={handleSave}\n      />\n    </Spin>\n  ) : (\n    <div onClick={() => setEditing(true)} className={styles.fakeInput}>\n      {ConneName}\n    </div>\n  );\n};\n\nexport default ConneNameInput;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { Spin, Select, message, Tag } from 'antd';\nimport styles from './Unit.module.less';\n\nconst NickNamesInput: React.FC<{\n  NickNames: string[];\n  CardID: number;\n  onCompleted?: () => any;\n}> = ({ NickNames, CardID, onCompleted }) => {\n  const [setCardMeta, { loading: setCardMetaLoading }] = useMutation<{\n    CardMeta: { ConneName?: string; NickNames?: string[] };\n  }>(\n    gql`\n      mutation($CardID: Int!, $ConneName: String, $NickNames: [String!]) {\n        CardMeta(\n          CardID: $CardID\n          ConneName: $ConneName\n          NickNames: $NickNames\n        ) {\n          ConneName\n          NickNames\n        }\n      }\n    `,\n    { onCompleted },\n  );\n  const [editing, setEditing] = useState(false);\n  const [value, setValue] = useState(NickNames || []);\n  const ref = useRef<Select<string[]>>(null);\n\n  useEffect(() => {\n    if (editing && ref.current) {\n      ref.current.focus();\n    }\n  }, [editing]);\n\n  const handleSave = async () => {\n    const resp = await setCardMeta({\n      variables: { CardID, NickNames: value },\n    });\n    console.log(resp);\n    message.success('修改成功');\n    setEditing(false);\n  };\n\n  return editing ? (\n    <Spin spinning={setCardMetaLoading}>\n      <Select<string[]>\n        mode=\"tags\"\n        tokenSeparators={[',', ' ']}\n        ref={ref}\n        value={value}\n        onChange={v => setValue(v)}\n        onBlur={handleSave}\n        style={{ width: '100%' }}\n      />\n    </Spin>\n  ) : (\n    <div onClick={() => setEditing(true)} className={styles.fakeInput}>\n      {NickNames &&\n        NickNames.map((name, index) => <Tag key={index}>{name}</Tag>)}\n    </div>\n  );\n};\n\nexport default NickNamesInput;\n","import React, { useState } from 'react';\nimport { Button, Icon, Tag, Radio, Row, Col } from 'antd';\nimport _ from 'lodash';\nimport { Link } from 'react-router-dom';\nimport useRouter from 'use-react-router';\nimport { BASE_GAME_URL, ICO_URL, BONUS_TYPE } from 'consts';\nimport styles from './Unit.module.less';\nimport { Data, query } from './types';\nimport Rarity from 'Components/Rarity';\nimport Gender from 'Components/Gender';\nimport Loading from 'Components/Loading';\nimport { useQuery } from '@apollo/react-hooks';\nimport classNames from 'classnames';\nimport SkillTable from 'Components/SkillTable';\nimport AbilityTable from 'Components/AbilityTable';\nimport ClassTable from 'Components/ClassTable';\nimport { Card, ClassData } from 'interfaces';\nimport DotTable from 'Components/DotTable';\nimport ConneNameInput from './ConneNameInput';\nimport NickNamesInput from './NickNamesInput';\nimport MediaContext from 'context/MediaContext';\n\nfunction countMinMax(\n  min: number,\n  max: number,\n  maxLevel: number,\n  maxLevelUnit: number,\n  mod: number,\n) {\n  return [\n    Math.ceil((mod / 100) * (min + (max - min) * (1 / maxLevel))),\n    Math.ceil((mod / 100) * (min + (max - min) * (maxLevelUnit / maxLevel))),\n  ];\n}\n\nfunction classDataToUnit(\n  classData: ClassData,\n  card: Card,\n  nearRange?: { [k: string]: number },\n) {\n  let maxLevelUnit = 0;\n  switch (classData.Type) {\n    case 'Evo2a':\n    case 'Evo2b':\n      maxLevelUnit = 99;\n      break;\n    case 'Evo':\n      if (card.Rare === 4) maxLevelUnit = 80;\n      if (card.Rare === 5) maxLevelUnit = 90;\n      if (card.Rare === 6) maxLevelUnit = 99;\n      if (card.Rare === 8) maxLevelUnit = 85;\n      if (card.Rare === 10) maxLevelUnit = 90;\n      if (card.Rare === 11) maxLevelUnit = 99;\n      break;\n    case 'Init':\n      if (card.Rare === 0) {\n        maxLevelUnit = 30;\n        break;\n      }\n      if (card.Rare === 1) {\n        maxLevelUnit = 40;\n        break;\n      }\n      if (classData.Data_ExtraAwakeOrbs.length === 0) {\n        maxLevelUnit = 50;\n        break;\n      }\n    // eslint-disable-next-line no-fallthrough\n    case 'CC':\n      if (card.Rare === 3) maxLevelUnit = 55;\n      if (card.Rare === 4) maxLevelUnit = 60;\n      if (card.Rare === 5) maxLevelUnit = 70;\n      if (card.Rare === 6) maxLevelUnit = 80;\n      if (card.Rare === 8) maxLevelUnit = 65;\n      break;\n  }\n\n  return {\n    ...classData,\n    HP: countMinMax(\n      classData.InitHP,\n      classData.MaxHP,\n      classData.MaxLevel,\n      maxLevelUnit,\n      card.MaxHPMod,\n    ),\n    Atk: countMinMax(\n      classData.InitAtk,\n      classData.MaxAtk,\n      classData.MaxLevel,\n      maxLevelUnit,\n      card.AtkMod,\n    ),\n    Def: countMinMax(\n      classData.InitDef,\n      classData.MaxDef,\n      classData.MaxLevel,\n      maxLevelUnit,\n      card.DefMod,\n    ),\n    Cost: [\n      classData.Cost + card.CostModValue,\n      classData.Cost + card.CostModValue - card.CostDecValue,\n    ],\n    range:\n      nearRange && nearRange[classData.Type] !== 0\n        ? nearRange[classData.Type]\n        : classData.AtkArea,\n    maxLevelUnit,\n  };\n}\n\nconst getStatus = (card: Data['Card']) => {\n  const { BattleStyle } = card.Classes[0];\n  const ranges = BattleStyle && {\n    Init: BattleStyle._Range_01,\n    CC: BattleStyle._Range_02,\n    Evo: BattleStyle._Range_03,\n    Evo2a: BattleStyle._Range_04,\n    Evo2b: BattleStyle._Range_05,\n  };\n  // const rarity = card.Rare\n\n  const classes = [...card.Classes];\n\n  if (card._AwakePattern === 1 || card._AwakePattern === 2) {\n    const index = classes.findIndex(\n      cl => cl.Type === `Evo2${card._AwakePattern === 1 ? 'b' : 'a'}`,\n    );\n    classes.splice(index, 1);\n  }\n\n  return classes.map(cl => classDataToUnit(cl, card, ranges));\n};\n\nconst Unit: React.FC = () => {\n  const { match } = useRouter<{ CardID: string }>();\n  const CardID = Number.parseInt(match.params.CardID, 10);\n\n  const [currentImg, setCurrentImg] = useState(0);\n  const [currentText, setCurrentText] = useState<number>();\n\n  const [avatars, setAvatars] = useState([0, 1, 2, 3]);\n\n  const { isTabletOrMobile } = MediaContext.useContainer();\n\n  const { loading, data, refetch } = useQuery<Data>(query, {\n    variables: { id: CardID },\n  });\n\n  if (data) {\n    if (data.Card.Rare >= 10)\n      data.Card.Classes = data.Card.Classes.filter(cl => cl.Type === 'Evo');\n  }\n\n  return (\n    <div className={styles.container}>\n      <Loading spinning={loading}>\n        {data && !_.isEmpty(data) && (\n          <div>\n            <h1 className=\"unit-title\">\n              <Link to={`/quest/${CardID - 1}`}>\n                <Icon type=\"left\" />\n              </Link>\n\n              <Gender gender={data.Card.Kind} />\n              <div style={{ display: 'inline-block' }}>\n                <Rarity rare={data.Card.Rare} />\n                <div>{data.Card.Name}</div>\n              </div>\n              <Link to={`/unit/${CardID + 1}`}>\n                <Icon type=\"right\" />\n              </Link>\n            </h1>\n            <p>\n              {data.Card.RaceName && (\n                <span>\n                  <Tag>{data.Card.RaceName}</Tag>\n                </span>\n              )}\n              {data.Card.AssignName && (\n                <span>\n                  <Tag color=\"magenta\">{data.Card.AssignName}</Tag>\n                </span>\n              )}\n              {data.Card.IdentityName && (\n                <span>\n                  <Tag color=\"black\">{data.Card.IdentityName}</Tag>\n                </span>\n              )}\n            </p>\n            <div className={styles.previewContainer}>\n              <div\n                className={classNames(styles.outerRadioContainer, {\n                  [styles.inset]: !isTabletOrMobile,\n                })}\n              >\n                <div className={styles.radioContainer}>\n                  <Radio.Group\n                    onChange={e => setCurrentImg(e.target.value)}\n                    value={currentImg}\n                    className={styles.radioGroup}\n                  >\n                    {data.Card.ImageStand.map((_, index) => (\n                      <Radio.Button key={`stand${index}`} value={index}>\n                        立绘{index + 1}\n                      </Radio.Button>\n                    ))}\n                  </Radio.Group>\n                  <Radio.Group\n                    onChange={e => setCurrentImg(e.target.value)}\n                    value={currentImg}\n                    className={classNames(styles.radioGroup, styles.danger)}\n                  >\n                    {data.Card.ImageCG.map((_, index) => (\n                      <Radio.Button key={`cg${index}`} value={index + 10}>\n                        CG{index + 1}\n                      </Radio.Button>\n                    ))}\n                  </Radio.Group>\n                </div>\n                <div className={styles.radioContainer}>\n                  <Radio.Group\n                    onChange={e => setCurrentText(e.target.value)}\n                    value={currentText}\n                    className={styles.radioGroup}\n                  >\n                    {data.Card.HarlemTextA.map((_, index) => (\n                      <Radio.Button key={`a${index}`} value={index}>\n                        表{index + 1}\n                      </Radio.Button>\n                    ))}\n                  </Radio.Group>\n                  <Radio.Group\n                    onChange={e => setCurrentText(e.target.value)}\n                    value={currentText}\n                    className={classNames(styles.radioGroup, styles.danger)}\n                  >\n                    {data.Card.HarlemTextR.map((_, index) => (\n                      <Radio.Button key={`r${index}`} value={index + 10}>\n                        里{index + 1}\n                      </Radio.Button>\n                    ))}\n                  </Radio.Group>\n                </div>\n              </div>\n              <div className={styles.outerImageContainer}>\n                <div className={styles.imageContainer}>\n                  {currentText !== undefined && (\n                    <div\n                      className={classNames(styles.textContainer, {\n                        [styles.fullScreen]: isTabletOrMobile,\n                      })}\n                    >\n                      <Button\n                        ghost\n                        shape=\"circle\"\n                        onClick={() => setCurrentText(undefined)}\n                        className={styles.closeButton}\n                      >\n                        <Icon type=\"close\" />\n                      </Button>\n                      <div\n                        className={styles.text}\n                        dangerouslySetInnerHTML={{\n                          __html: (currentText < 10\n                            ? data.Card.HarlemTextA[currentText]\n                            : data.Card.HarlemTextR[currentText - 10]\n                          )\n                            .replace(\n                              /([＠@].*\\r\\n)/g,\n                              (match, p1) =>\n                                `<span style=\"font-weight: bold\">${p1}</span>`,\n                            )\n                            .replace(/\\r\\n/g, '<br />'),\n                        }}\n                      />\n                    </div>\n                  )}\n                  <img\n                    style={{ height: '100%' }}\n                    src={\n                      BASE_GAME_URL +\n                      (currentImg < 10\n                        ? data.Card.ImageStand[currentImg]\n                        : data.Card.ImageCG[currentImg - 10])\n                    }\n                    alt={currentImg.toString()}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <table className={styles.table}>\n              <tbody>\n                <tr>\n                  <th>大头贴</th>\n                  <td colSpan={5}>\n                    {avatars.map(avatar => (\n                      <img\n                        key={avatar}\n                        src={`${ICO_URL}/${avatar}/${CardID}.png`}\n                        alt={`${CardID}-${avatar}`}\n                        onError={() => {\n                          const index = avatars.findIndex(a => a === avatar);\n                          setAvatars([\n                            ...avatars.slice(0, index),\n                            ...avatars.slice(index + 1),\n                          ]);\n                        }}\n                      />\n                    ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th>画师</th>\n                  <td colSpan={5}>{data.Card.IllustName}</td>\n                </tr>\n                <tr>\n                  <th>昵称</th>\n                  <td colSpan={5}>\n                    <NickNamesInput\n                      NickNames={data.Card.NickNames}\n                      CardID={CardID}\n                      onCompleted={refetch}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <th>圆爹名</th>\n                  <td colSpan={5}>\n                    <ConneNameInput\n                      ConneName={data.Card.ConneName}\n                      CardID={CardID}\n                      onCompleted={refetch}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <th>手料理</th>\n                  <td colSpan={5}>{data.Card.HomeCooking}</td>\n                </tr>\n                <tr>\n                  <th>金币</th>\n                  <td colSpan={2}>{data.Card.SellPrice}</td>\n                  <th>虹水晶</th>\n                  <td colSpan={2}>{data.Card._TradePoint}</td>\n                </tr>\n                <tr>\n                  <th>魔抗</th>\n                  <td colSpan={5}>{data.Card.MagicResistance}</td>\n                </tr>\n                <tr>\n                  <th>HP补正</th>\n                  <td>{data.Card.MaxHPMod / 100}</td>\n                  <th>Atk补正</th>\n                  <td>{data.Card.AtkMod / 100}</td>\n                  <th>Def补正</th>\n                  <td>{data.Card.DefMod / 100}</td>\n                </tr>\n                <tr>\n                  <th>好感1</th>\n                  <td>\n                    {data.Card.BonusType !== 0 &&\n                      BONUS_TYPE.get(data.Card.BonusType).replace(\n                        '%d',\n                        Math.ceil(data.Card.BonusNum * 1.2),\n                      )}\n                  </td>\n                  <th>好感2</th>\n                  <td>\n                    {data.Card.BonusType2 !== 0 &&\n                      BONUS_TYPE.get(data.Card.BonusType2).replace(\n                        '%d',\n                        Math.ceil(data.Card.BonusNum2 * 1.2),\n                      )}\n                  </td>\n                  <th>好感150</th>\n                  <td>\n                    {data.Card.BonusType3 !== 0 &&\n                      BONUS_TYPE.get(data.Card.BonusType3).replace(\n                        '%d',\n                        Math.ceil(data.Card.BonusNum3),\n                      )}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n\n            <table className={styles.table}>\n              <thead>\n                <tr>\n                  <th>职业名</th>\n                  <th>等级</th>\n                  <th>HP</th>\n                  <th>攻击</th>\n                  <th>防御</th>\n                  <th>射程</th>\n                  <th>档数</th>\n                  <th>Cost</th>\n                </tr>\n              </thead>\n              <thead>\n                {getStatus(data.Card).map((st, index) => (\n                  <React.Fragment key={st.ClassID}>\n                    <tr>\n                      <td rowSpan={2}>\n                        {st.Type === 'Evo2a' && (\n                          <span style={{ color: '#1890ff' }}>(A) </span>\n                        )}\n                        {st.Type === 'Evo2b' && (\n                          <span style={{ color: '#52c41a' }}>(B) </span>\n                        )}\n                        {st.Name}\n                      </td>\n                      <td>1</td>\n                      <td>{st.HP[0]}</td>\n                      <td>{st.Atk[0]}</td>\n                      <td>{st.Def[0]}</td>\n                      <td rowSpan={2}>{st.range}</td>\n                      <td rowSpan={2}>{st.BlockNum}</td>\n                      <td rowSpan={2}>\n                        {st.Cost[0]}/{st.Cost[1]}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>{st.maxLevelUnit}</td>\n                      <td>{st.HP[1]}</td>\n                      <td>{st.Atk[1]}</td>\n                      <td>{st.Def[1]}</td>\n                    </tr>\n                  </React.Fragment>\n                ))}\n              </thead>\n            </table>\n\n            <div>\n              <h2>技能</h2>\n              {data.Card.Skills.map((skillWithType, index) => (\n                <SkillTable\n                  skills={skillWithType.Skills}\n                  type={skillWithType.Type}\n                  key={index}\n                />\n              ))}\n            </div>\n\n            <div>\n              <h2>被动</h2>\n              {_.uniqBy(data.Card.Abilities, 'AbilityID').map(ability => (\n                <AbilityTable key={ability.AbilityID} ability={ability} />\n              ))}\n            </div>\n\n            <div>\n              <h2>职业</h2>\n              {data.Card.Classes.map(cl => (\n                <ClassTable\n                  classData={cl}\n                  key={cl.ClassID}\n                  onCompleted={refetch}\n                />\n              ))}\n            </div>\n\n            {data.Card.Dots && (\n              <div>\n                <h2>点阵</h2>\n                <Row gutter={8}>\n                  {data.Card.Dots.map((dot, index) => (\n                    <Col key={index} sm={24} md={12}>\n                      <DotTable\n                        dot={dot}\n                        CardID={data.Card.CardID}\n                        type=\"Player\"\n                      />\n                    </Col>\n                  ))}\n                </Row>\n              </div>\n            )}\n          </div>\n        )}\n      </Loading>\n    </div>\n  );\n};\n\nexport default Unit;\n","import React, { useState, useEffect } from 'react';\nimport { Layout, Input, Row, Col, Icon, Drawer, Tag } from 'antd';\nimport { FixedSizeList as List } from 'react-window';\nimport gql from 'graphql-tag';\nimport useRouter from 'use-react-router';\nimport classNames from 'classnames';\nimport { useMediaQuery } from 'react-responsive';\nimport { Card } from './types';\nimport UnitListCard from './UnitListCard';\nimport styles from './UnitList.module.less';\nimport Unit from '../Unit';\nimport Loading from '../../Loading';\nimport { useQuery } from '@apollo/react-hooks';\n\nconst { Content } = Layout;\n\ninterface Data {\n  Cards: Card[];\n}\n\ninterface Props {\n  data?: Data;\n  loading: boolean;\n}\n\nconst FILTER_TYPE: { [k: string]: string } = {\n  Rare: '稀有',\n  RaceName: '种族',\n  AssignName: '出身',\n  IdentityName: '不死',\n  IllustName: '画师',\n  'Classes.0.Name': '职业',\n};\n\nconst UnitList: React.FC<Props> = ({ data, loading }) => {\n  const [sorter, setSorter] = useState({ key: 'CardID', order: true });\n  const [search, setSearch] = useState('');\n  const [filters, setFilters] = useState<\n    Array<{ content: string; type: string }>\n  >([]);\n\n  // 两个变量react-window用\n  const [size, setSize] = useState({ width: 0, height: 0 });\n  const [scrolled, setScrolled] = useState(0);\n\n  const { match, history } = useRouter<{ CardID: string }>();\n  const { CardID } = match.params;\n\n  const isTabletOrMobile = useMediaQuery({ query: '(max-width: 991px)' });\n\n  useEffect(() => {\n    const main = document.getElementsByTagName('main')[0];\n    const handleResize = () => {\n      const width = main.offsetWidth - 60;\n      const height = main.offsetHeight - 150;\n      setSize({ width, height });\n    };\n    window.onresize = handleResize;\n    handleResize();\n    return () => {\n      window.onresize = null;\n    };\n  }, []);\n\n  // 生成表头\n  const genSorter = (title: string, key: string) => {\n    return (\n      <div\n        style={{ cursor: 'pointer' }}\n        onClick={() =>\n          setSorter({ key, order: key === sorter.key ? !sorter.order : true })\n        }\n      >\n        {title}\n        {sorter.key === key && (\n          <Icon type={sorter.order ? 'caret-down' : 'caret-up'} />\n        )}\n      </div>\n    );\n  };\n\n  const getParam = (target: any, keys: string) => {\n    keys.split('.').forEach((st: string) => (target = target[st]));\n    return target;\n  };\n\n  const cardSorter = (cardA: any, cardB: any) => {\n    const { key, order } = sorter;\n    const paramA = getParam(cardA, key);\n    const paramB = getParam(cardB, key);\n    if (typeof paramA === 'number') {\n      return order ? paramA - paramB : paramB - paramA;\n    } else {\n      if (paramA > paramB) {\n        return order ? 1 : -1;\n      } else if (paramA < paramB) {\n        return order ? -1 : 1;\n      } else {\n        return 0;\n      }\n    }\n  };\n\n  const cardFilter = (card: any) => {\n    let flag = JSON.stringify(card).includes(search);\n\n    filters.forEach(filter => {\n      const { type, content } = filter;\n      const sourceValue = getParam(card, type);\n      let parsedValue: number | string = content;\n      if (typeof sourceValue === 'number') {\n        parsedValue = Number.parseInt(parsedValue, 10);\n      }\n      flag = flag && sourceValue === parsedValue;\n    });\n    return flag;\n  };\n\n  const handleSetFilter = (content: string, type: string) => {\n    const filter = filters.find(f => f.content === content && f.type === type);\n    if (!filter) {\n      setFilters(fs => [...fs, { content, type }]);\n    }\n  };\n\n  const showUnit = (cardID: number) => {\n    history.push({\n      pathname: `/unit/${cardID}`,\n      state: { modal: true },\n    });\n  };\n\n  const cards =\n    (data &&\n      data.Cards &&\n      data.Cards.slice()\n        .sort(cardSorter)\n        .filter(cardFilter)) ||\n    [];\n\n  return (\n    <Content className={styles.unitListContent}>\n      <Input\n        placeholder=\"搜索单位\"\n        value={search}\n        onChange={event => setSearch(event.target.value)}\n      />\n      <div className={styles.filterContainer}>\n        {filters.map((filter, index) => {\n          return (\n            <Tag\n              key={index + filter.content}\n              closable\n              onClose={() => {\n                const i = filters.findIndex(\n                  f => f.content === filter.content && f.type === filter.type,\n                );\n                setFilters([...filters.slice(0, i), ...filters.slice(i + 1)]);\n              }}\n            >\n              {FILTER_TYPE[filter.type]}：{filter.content}\n            </Tag>\n          );\n        })}\n      </div>\n      <Row\n        className={classNames(styles.sorterBlock, {\n          [styles.shadow]: scrolled !== 0,\n        })}\n      >\n        <Col md={4} xs={8}>\n          {genSorter('#', 'CardID')}\n        </Col>\n        <Col md={4} xs={16}>\n          {genSorter('名称', 'Name')}\n        </Col>\n        <Col lg={6} xs={0}>\n          {genSorter('种族', 'Race')}\n        </Col>\n        <Col lg={5} md={8} xs={0}>\n          {genSorter('职业', 'Class[0].Name')}\n        </Col>\n        <Col lg={5} md={8} xs={0}>\n          {genSorter('画师', 'Illust')}\n        </Col>\n      </Row>\n      <div className={styles.listContainer}>\n        {!loading ? (\n          <List\n            height={size.height}\n            itemCount={cards.length}\n            itemSize={68}\n            width={size.width}\n            onScroll={({ scrollOffset }) => setScrolled(scrollOffset)}\n          >\n            {({ index, style }) => (\n              <div key={cards[index].CardID} style={style}>\n                <UnitListCard\n                  card={cards[index]}\n                  showUnit={showUnit}\n                  setFilter={handleSetFilter}\n                />\n              </div>\n            )}\n          </List>\n        ) : (\n          <Loading />\n        )}\n      </div>\n      <Drawer\n        width={isTabletOrMobile ? '100%' : '80%'}\n        visible={!!CardID}\n        destroyOnClose\n        onClose={() => history.push('/unit')}\n        getContainer={false}\n        style={{ position: 'absolute' }}\n      >\n        {CardID && <Unit />}\n      </Drawer>\n    </Content>\n  );\n};\n\nconst UnitListWrapper: React.FC = props => {\n  const { data, loading } = useQuery(\n    gql`\n      query {\n        Cards {\n          CardID\n          Name\n          Rare\n          Kind\n          IllustName\n          RaceName\n          AssignName\n          IdentityName\n          Classes {\n            Name\n          }\n        }\n      }\n    `,\n  );\n  return <UnitList {...props} data={data} loading={loading} />;\n};\n\nexport default UnitListWrapper;\n","export const MISSION_TYPE: { [k: string]: string } = {\n  Assault: '投票讨伐',\n  Story: '主线',\n  Emergency: '紧急',\n  Reproduce: '复刻',\n  DailyReproduce: '每日复刻',\n  Subjugation: '大讨伐',\n  DevilAdvent: '魔神',\n  Harlem: '交流',\n  Daily: '曜日',\n  Challenge: '挑战',\n  Tutorial: '教程',\n  Tower: '英杰之塔',\n  Raid: '神兽',\n};\n\nexport interface QuestData {\n  Name: string;\n  QuestID: number;\n  Charisma: number;\n  ActionPoint: number;\n}\n","import React from 'react';\nimport { Spin, Tag } from 'antd';\nimport gql from 'graphql-tag';\nimport { QuestData } from './types';\nimport useRouter from 'use-react-router';\nimport { useQuery } from '@apollo/react-hooks';\nimport styles from './QuestList.module.less';\n\nconst MissionShutter: React.FC<{ mission: any; isTabletOrMobile: boolean }> = ({\n  mission,\n  isTabletOrMobile,\n}) => {\n  const { history } = useRouter();\n\n  const showQuest = (questID: number) => {\n    history.push(`/quest/${questID}`);\n  };\n\n  const { loading, data } = useQuery<{ Mission: { Quests: QuestData[] } }>(\n    gql`\n      query($MissionID: Int!) {\n        Mission(MissionID: $MissionID) {\n          Quests {\n            Name\n            QuestID\n            Charisma\n            ActionPoint\n          }\n        }\n      }\n    `,\n    { variables: { MissionID: mission.MissionID } },\n  );\n  return loading ? (\n    <Spin />\n  ) : data!.Mission.Quests.length === 0 ? (\n    <div>该战役下没有关卡。</div>\n  ) : (\n    <div>\n      {data!.Mission.Quests.map(quest => (\n        <div\n          key={quest.QuestID}\n          className={styles.listCard}\n          onClick={showQuest.bind(null, quest.QuestID)}\n        >\n          <span>{quest.QuestID}</span>\n          &nbsp;\n          <strong>{quest.Name}</strong>\n          <div\n            style={{\n              display: isTabletOrMobile ? 'block' : 'inline-block',\n              float: isTabletOrMobile ? 'none' : 'right',\n            }}\n          >\n            {quest.Charisma !== 0 && <Tag color=\"green\">{quest.Charisma}</Tag>}\n            {quest.ActionPoint !== 0 && (\n              <Tag color=\"red\">{quest.ActionPoint}</Tag>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default MissionShutter;\n","import React from 'react';\nimport { ICO_URL, BATTLE_TALK_EVENT_URL } from 'consts';\nimport { renderDescription } from 'utils';\n\nconst TalkRow: React.FC<{\n  talk: { Name: string; FaceID: number; Message: string };\n  MissionID: number;\n  isTabletOrMobile: boolean;\n}> = ({ talk, MissionID, isTabletOrMobile }) => {\n  return (\n    <tr>\n      <th>\n        {talk.Name}\n        <img\n          style={{\n            display: 'block',\n            margin: 'auto',\n            width: '100%',\n          }}\n          alt={talk.FaceID.toString()}\n          src={\n            talk.FaceID >= 1000\n              ? `${ICO_URL}/0/${talk.FaceID - 1000}.png`\n              : `${BATTLE_TALK_EVENT_URL}/${MissionID}/${talk.FaceID}.png`\n          }\n        />\n      </th>\n      <td colSpan={9}>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: renderDescription(talk.Message),\n          }}\n          style={{\n            margin: 'auto',\n            textAlign: 'left',\n            maxWidth: '30em',\n          }}\n        />\n      </td>\n    </tr>\n  );\n};\n\nexport default TalkRow;\n","import React, { useState } from 'react';\nimport { Button, Divider, Row, Col, Switch } from 'antd';\nimport { ICO_URL, ENEMY_DOT_URL, ENEMY_CHANGE_COND } from 'consts';\nimport styles from './Quest.module.less';\nimport { Dot, Enemy, MapEntry } from 'interfaces';\nimport { useMediaQuery } from 'react-responsive';\nimport DotTable from 'Components/DotTable';\nimport TalkRow from 'Components/DotAnimation/TalkRow';\nimport { Quest as QuestType } from 'interfaces';\nimport MissileTable from 'Components/MissileTable';\n\nconst getAttackSpeed = (enemy: Enemy & MapEntry, dots: Dot[]) => {\n  let length = 0;\n  for (const dot of dots) {\n    if (dot.Name === 'Attack') {\n      length = dot.Length;\n    }\n  }\n  // don't know why\n  if (!length) {\n    return null;\n  }\n  let attackSpeed = enemy.AttackWait * 2 + length;\n  if (!enemy.ATTACK_RANGE) {\n    attackSpeed += enemy.ATTACK_SPEED;\n  }\n  return attackSpeed;\n};\n\ninterface EnemyTableRowsProps {\n  enemies: Array<Enemy & MapEntry>;\n  drops: string[];\n  isTabletOrMobile: boolean;\n}\n\nconst EnemyTableRows: React.FC<EnemyTableRowsProps> = ({\n  enemies,\n  drops,\n  isTabletOrMobile,\n}) => {\n  const [expand, setExpand] = useState(false);\n  const [showTable, setShowTable] = useState<boolean[]>(\n    Array(enemies.length).fill(false),\n  );\n\n  return (\n    <>\n      {enemies.slice(0, expand ? enemies.length : 1).map((e, index) => {\n        const dots = e.Dots;\n        const previewSprite = dots[0].Entries[0].Sprites[0];\n        const types = [\n          e.SkyFlag && '飛行',\n          e.EnemyElem._EnemyElementName,\n          e.EnemyType._EnemyTypeName,\n          e._Attribute,\n        ]\n          .filter(st => st && st !== 'なし')\n          .join(' ');\n        const changeCondition = e.Param_ChangeParam\n          ? ENEMY_CHANGE_COND[e.Param_ChangeCondition]\n          : null;\n        const imgID = (e.PatternID >> 8) % 4096;\n        const dropImg =\n          e.PrizeCardID !== 0 ? (\n            <img\n              src={drops[e.PrizeCardID - 1]}\n              alt={e.PrizeCardID.toString()}\n              style={{ width: 40 }}\n            />\n          ) : null;\n        return (\n          <React.Fragment key={index}>\n            <tr\n              className={styles.compact}\n              style={{ cursor: 'pointer' }}\n              onClick={() =>\n                setShowTable(st =>\n                  st.map((v, i) => {\n                    if (i === index) return !v;\n                    return v;\n                  }),\n                )\n              }\n            >\n              <td style={{ textAlign: 'left' }}>\n                {enemies.length > 1 && index === 0 && (\n                  <Button\n                    icon={expand ? 'minus' : 'plus'}\n                    onClick={e => {\n                      e.stopPropagation();\n                      setExpand(e => !e);\n                    }}\n                    style={{\n                      width: 20,\n                      height: 20,\n                      fontSize: 10,\n                      marginRight: 5,\n                    }}\n                  />\n                )}\n                {enemies.length > 1 && index !== 0 && (\n                  <Divider style={{ margin: '0 12.5px' }} type=\"vertical\" />\n                )}\n                <div\n                  style={{\n                    display: 'inline-block',\n                    width: previewSprite.Width,\n                    height: previewSprite.Height,\n                    backgroundImage: `url(\"${ENEMY_DOT_URL}/${imgID}/sprite.png\")`,\n                    backgroundPositionX: -previewSprite.X,\n                    backgroundPositionY: -previewSprite.Y,\n                    zoom: Math.min(\n                      40 / previewSprite.Height,\n                      40 / previewSprite.Width,\n                    ),\n                    verticalAlign: 'middle',\n                  }}\n                />\n              </td>\n              {!isTabletOrMobile && <td>{types}</td>}\n              <td>\n                {getAttackSpeed(e, dots)}\n                <br />\n                {e.ATTACK_RANGE}\n              </td>\n              <td>{e.HP}</td>\n              <td\n                style={{\n                  background:\n                    e.TypeAttack === 300\n                      ? '#ffdad2'\n                      : e.MagicAttack\n                      ? '#c8f1bb'\n                      : '#ccecff',\n                }}\n              >\n                {e.ATTACK_POWER}\n              </td>\n              <td>\n                {e.ARMOR_DEFENSE}\n                <br />\n                {e.MAGIC_DEFENSE}\n              </td>\n              <td>{e.Param_ResistanceAssassin}</td>\n              {!isTabletOrMobile && <td>{dropImg}</td>}\n              {!isTabletOrMobile && <td>{changeCondition}</td>}\n            </tr>\n            {showTable[index] && (\n              <tr>\n                <td colSpan={9} style={{ paddingTop: 0, paddingBottom: 0 }}>\n                  <Row gutter={8}>\n                    <Col xs={24} md={12}>\n                      <table className={styles.table}>\n                        <tbody>\n                          <tr>\n                            <th>类型</th>\n                            <td>{types}</td>\n                          </tr>\n                          {changeCondition && (\n                            <tr>\n                              <th>切换条件</th>\n                              <td>{changeCondition}</td>\n                            </tr>\n                          )}\n                          <tr>\n                            <th>循环数量</th>\n                            <td>{e.Loop}</td>\n                          </tr>\n                          <tr>\n                            <th>路线</th>\n                            <td>{e.RouteNo}</td>\n                          </tr>\n                          {e.PrizeCardID !== 0 && (\n                            <tr>\n                              <th>掉落</th>\n                              <td>{dropImg}</td>\n                            </tr>\n                          )}\n                        </tbody>\n                      </table>\n\n                      {e.SpecialtyConfigs.length > 0 && (\n                        <table\n                          className={styles.table}\n                          style={{\n                            tableLayout: 'fixed',\n                          }}\n                        >\n                          <thead>\n                            <tr>\n                              <th>类型</th>\n                              <th>p1</th>\n                              <th>p2</th>\n                              <th>p3</th>\n                              <th>p4</th>\n                            </tr>\n                            <tr>\n                              <th colSpan={3}>cmd</th>\n                              <th colSpan={2}>...p</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {e.SpecialtyConfigs.map((config, index) => {\n                              return (\n                                <React.Fragment key={index}>\n                                  <tr\n                                    style={{\n                                      borderBottom:\n                                        config._Expression || config._ExtParam\n                                          ? undefined\n                                          : '2px solid #e8e8e8',\n                                    }}\n                                  >\n                                    <td>{config.Type_Influence}</td>\n                                    <td>{config.Param_1}</td>\n                                    <td>{config.Param_2}</td>\n                                    <td>{config.Param_3}</td>\n                                    <td>{config.Param_4}</td>\n                                  </tr>\n\n                                  {!!(\n                                    config._Expression || config._ExtParam\n                                  ) && (\n                                    <tr\n                                      style={{\n                                        borderBottom: '2px solid #e8e8e8',\n                                      }}\n                                    >\n                                      <td colSpan={3}>{config._Expression}</td>\n                                      <td colSpan={2}>{config._ExtParam}</td>\n                                    </tr>\n                                  )}\n                                </React.Fragment>\n                              );\n                            })}\n                          </tbody>\n                        </table>\n                      )}\n                      {!!(e.Missile && e.Missile.Enemy === 1) && (\n                        <MissileTable missile={e.Missile} compact />\n                      )}\n                    </Col>\n                    <Col xs={24} md={12}>\n                      {dots.map((dot, i) => (\n                        <DotTable\n                          key={i}\n                          CardID={imgID}\n                          type=\"Enemy\"\n                          dot={dot}\n                        />\n                      ))}\n                    </Col>\n                  </Row>\n                </td>\n              </tr>\n            )}\n          </React.Fragment>\n        );\n      })}\n    </>\n  );\n};\n\ninterface EnemyTableProps {\n  data: {\n    Quest: QuestType;\n    QuestEventTexts: Array<{\n      Message: string;\n      Name: string;\n      FaceID: number;\n    }>;\n  };\n}\n\nconst EnemyTable: React.FC<EnemyTableProps> = ({ data }) => {\n  const isTabletOrMobile = useMediaQuery({ query: '(max-width: 991px)' });\n  const { Quest: quest } = data;\n  const enemies = quest.Map.Enemies || quest.Mission.Enemies;\n  const entries = quest.Map.Entries[quest.EntryNo];\n  const mapLevel = quest.Level;\n  const [showDuplicate, setShowDuplicate] = useState(false);\n  const [showTalk, setShowTalk] = useState(true);\n  const drops = [\n    quest.Treasure1,\n    quest.Treasure2,\n    quest.Treasure3,\n    quest.Treasure4,\n    quest.Treasure5,\n  ].map(treasure => `${ICO_URL}/0/${treasure}.png`);\n  const parsedEnemies: Array<Array<Enemy & MapEntry> | MapEntry> = [];\n  const parseEnemy = (entry: MapEntry, enemyID: number = entry.EnemyID - 1) => {\n    const enemy = { ...enemies[enemyID], ...entry, EnemyID: enemyID };\n    if (!enemy.Level) {\n      enemy.Level = 100;\n    }\n    enemy.HP = (enemy.HP * mapLevel * enemy.Level) / 10000;\n    if (!enemy.ATTACK_RANGE) {\n      enemy.ATTACK_POWER =\n        (enemy.ATTACK_POWER * mapLevel * enemy.Level) / 10000;\n    }\n    return enemy;\n  };\n  for (const entry of entries) {\n    // ids between 0 and 1000 are true enemies\n    if (entry.EnemyID >= 0 && entry.EnemyID < 1000) {\n      const enemy = parseEnemy(entry);\n      const enemyGroup = [enemy];\n      if (\n        parsedEnemies.find(\n          ea =>\n            !showDuplicate &&\n            ea instanceof Array &&\n            ea[0].EnemyID === enemy.EnemyID,\n        )\n      ) {\n        continue;\n      }\n      if (enemy.Param_ChangeParam) {\n        while (enemyGroup[enemyGroup.length - 1].Param_ChangeParam) {\n          const changeFrom = enemyGroup[enemyGroup.length - 1];\n          const enemyID = changeFrom.Param_ChangeParam - 1;\n          if (enemyGroup.find(e => e.EnemyID === enemyID)) {\n            break;\n          }\n          const newEnemy = parseEnemy(entry, enemyID);\n          enemyGroup.push(newEnemy);\n        }\n      }\n      parsedEnemies.push(enemyGroup);\n    } else {\n      parsedEnemies.push(entry);\n    }\n  }\n  return (\n    <table className={styles.table}>\n      <thead>\n        <tr>\n          <td colSpan={12}>\n            重复敌人\n            <Switch\n              checkedChildren=\"显示\"\n              unCheckedChildren=\"隐藏\"\n              checked={showDuplicate}\n              onChange={value => setShowDuplicate(value)}\n            />\n            <Divider type=\"vertical\" />\n            对话\n            <Switch\n              checkedChildren=\"显示\"\n              unCheckedChildren=\"隐藏\"\n              checked={showTalk}\n              onChange={value => setShowTalk(value)}\n            />\n          </td>\n        </tr>\n        <tr>\n          <th rowSpan={2} style={{ width: 100 }}>\n            点阵\n          </th>\n          {!isTabletOrMobile && <th rowSpan={2}>属性</th>}\n          <th>攻速</th>\n          <th rowSpan={2}>HP</th>\n          <th rowSpan={2}>攻击</th>\n          <th>防御</th>\n          <th rowSpan={2}>暗杀</th>\n          {!isTabletOrMobile && <th rowSpan={2}>掉落</th>}\n          {!isTabletOrMobile && <th rowSpan={2}>切换</th>}\n        </tr>\n        <tr>\n          <th>射程</th>\n          <th>魔抗</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        {parsedEnemies.map((enemies, index) => {\n          if (enemies instanceof Array) {\n            return (\n              <EnemyTableRows\n                isTabletOrMobile={isTabletOrMobile}\n                enemies={enemies}\n                drops={drops}\n                key={index}\n              />\n            );\n          } else if (enemies.EnemyID === -1) {\n            // wait\n            return null;\n          } else if (enemies.EnemyID === 2000) {\n            // exclution mark\n            return null;\n          } else if (enemies.EnemyID >= 1000 && enemies.EnemyID < 2000) {\n            // quest event text\n            return showTalk ? (\n              <TalkRow\n                key={`enemy-table-${index}`}\n                talk={data.QuestEventTexts[enemies.EnemyID - 1000]}\n                MissionID={quest.Mission.MissionID}\n                isTabletOrMobile={isTabletOrMobile}\n              />\n            ) : null;\n          } else if (enemies.EnemyID === 4201) {\n            // command, play se or call a event, etc\n            const command = enemies.EntryCommand;\n            const match = /CallEvent\\(([\\d,]+)\\)/.exec(command);\n            if (match) {\n              const list = match[1].split(',');\n              return list.map((s, index) => {\n                const recordIndex = Number.parseInt(s, 10);\n                const talk = quest.Mission.BattleTalkEvents.find(\n                  e => e.RecordIndex === recordIndex,\n                );\n                if (!talk) {\n                  return null;\n                }\n                return showTalk ? (\n                  <TalkRow\n                    key={`enemy-table-${index}-event-${recordIndex}`}\n                    MissionID={quest.Mission.MissionID}\n                    talk={talk}\n                    isTabletOrMobile={isTabletOrMobile}\n                  />\n                ) : null;\n              });\n            }\n            return (\n              <tr style={{ display: 'none' }} key={`enemy-table-${index}`}>\n                <td colSpan={14}>{enemies.EntryCommand}</td>\n              </tr>\n            );\n          }\n          return null;\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default EnemyTable;\n","import React from 'react';\nimport { Enemy } from 'interfaces';\nimport { ENEMY_DOT_URL } from 'consts';\n\nconst PreviewDot: React.FC<{ enemy: Enemy }> = ({ enemy }) => {\n  const imgID = (enemy.PatternID >> 8) % 4096;\n  const previewSprite = enemy.Dots[0].Entries[0].Sprites[0];\n  return (\n    <div>\n      <div\n        style={{\n          display: 'inline-block',\n          width: previewSprite.Width,\n          height: previewSprite.Height,\n          backgroundImage: `url(\"${ENEMY_DOT_URL}/${imgID}/sprite.png\")`,\n          backgroundPositionX: -previewSprite.X,\n          backgroundPositionY: -previewSprite.Y,\n          zoom: Math.min(40 / previewSprite.Height, 40 / previewSprite.Width),\n          verticalAlign: 'middle',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default PreviewDot;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { Quest } from 'interfaces';\nimport { STATIC_URL } from 'consts';\nimport { Stage, Layer, Image, Circle, Arrow } from 'react-konva';\nimport useImage from 'use-image';\nimport styles from './Quest.module.less';\nimport { InputNumber, Select } from 'antd';\n\nconst MapTable: React.FC<{ quest: Quest }> = ({ quest }) => {\n  const [mapImg] = useImage(\n    'http://assets.millennium-war.net' + quest.Map.Image,\n  );\n  const [heartImg] = useImage(STATIC_URL + '/heart.png');\n  const [nearImg] = useImage(STATIC_URL + '/near.png');\n  const [farImg] = useImage(STATIC_URL + '/far.png');\n  const [zoom, setZoom] = useState(1);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [circle, setCircle] = useState<{\n    x?: number;\n    y?: number;\n    range?: number;\n  }>({});\n  const [routeNos, setRouteNos] = useState<number[]>([]);\n\n  useEffect(() => {\n    const resize = () => {\n      if (containerRef.current) {\n        setZoom(containerRef.current.offsetWidth / 960);\n      }\n    };\n    window.onresize = resize;\n    resize();\n    return () => {\n      window.onresize = null;\n    };\n  }, []);\n\n  return (\n    <>\n      <div\n        style={{\n          width: '100%',\n          height: 0,\n          paddingBottom: '66.67%',\n          overflow: 'hidden',\n        }}\n        ref={containerRef}\n      >\n        <Stage width={960} height={640} scaleX={zoom} scaleY={zoom}>\n          <Layer>\n            <Image\n              image={mapImg}\n              onClick={() => {\n                console.log(755);\n              }}\n            />\n            {mapImg && heartImg && nearImg && farImg && (\n              <>\n                <Image image={mapImg} />\n                {quest.Map.Locations[quest.LocationNo].map(\n                  (location, index) => {\n                    const img =\n                      location.ObjectID === 0\n                        ? heartImg\n                        : location.ObjectID < 300\n                        ? nearImg\n                        : farImg;\n                    if (location.ObjectID === 0) {\n                      return (\n                        <Image\n                          image={img}\n                          key={index}\n                          x={location.X - img.width / 2}\n                          y={location.Y - img.height / 2}\n                        />\n                      );\n                    }\n                    return (\n                      <Image\n                        onClick={() => {\n                          setCircle(c => ({\n                            x: location.X,\n                            y: location.Y,\n                            range: c.range || 250,\n                          }));\n                        }}\n                        onMouseEnter={() => {\n                          document.body.style.cursor = 'pointer';\n                        }}\n                        onMouseLeave={() => {\n                          document.body.style.cursor = 'default';\n                        }}\n                        image={img}\n                        key={index}\n                        x={location.X - img.width / 2}\n                        y={location.Y - img.height / 3}\n                      />\n                    );\n                  },\n                )}\n                {circle.range !== undefined &&\n                  circle.x !== undefined &&\n                  circle.y !== undefined && (\n                    <Circle\n                      radius={circle.range * 0.75}\n                      x={circle.x}\n                      y={circle.y}\n                      fill=\"rgba(0, 255, 0, 0.3)\"\n                      stroke=\"rgba(0, 255, 0, 0.5)\"\n                      onClick={() => setCircle({})}\n                    />\n                  )}\n                {quest.Map.Routes.map((routes, index) => {\n                  if (!routeNos.includes(index)) {\n                    return null;\n                  }\n                  return (\n                    <React.Fragment key={index}>\n                      {routes.slice(1).map((route, i) => (\n                        <Arrow\n                          points={[routes[i].X, routes[i].Y, route.X, route.Y]}\n                          key={i}\n                          stroke=\"rgba(255, 255, 255, 0.7)\"\n                          fill=\"red\"\n                          strokeWidth={8}\n                        />\n                      ))}\n                    </React.Fragment>\n                  );\n                })}\n              </>\n            )}\n          </Layer>\n        </Stage>\n      </div>\n      <table className={styles.table}>\n        <tbody>\n          <tr>\n            <th>射程圈</th>\n            <td>\n              <InputNumber\n                min={0}\n                style={{ width: '100%' }}\n                value={circle.range}\n                onChange={value =>\n                  value &&\n                  value >= 0 &&\n                  setCircle(c => ({ ...c, range: value && value }))\n                }\n                placeholder=\"点一下上图里的配置位\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th>路径</th>\n            <td>\n              <Select\n                mode=\"multiple\"\n                style={{ width: '100%' }}\n                value={routeNos}\n                onChange={(value: number[]) => setRouteNos(value)}\n                placeholder=\"选择路径\"\n              >\n                {quest.Map.Routes.map(\n                  (route, index) =>\n                    route && (\n                      <Select.Option key={index} value={index}>\n                        {index}\n                      </Select.Option>\n                    ),\n                )}\n              </Select>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default MapTable;\n","import React from 'react';\nimport { QuestTermConfig } from 'interfaces';\nimport styles from './Quest.module.less';\n\nconst QuestTermTable: React.FC<{ terms: QuestTermConfig[] }> = ({ terms }) => {\n  return (\n    <table\n      className={styles.table}\n      style={{\n        margin: -1,\n        width: 'calc(100% + 2px)',\n        tableLayout: 'fixed',\n      }}\n    >\n      <thead>\n        <tr>\n          <th>类型</th>\n          <th>p1</th>\n          <th>p2</th>\n          <th>p3</th>\n          <th>p4</th>\n        </tr>\n        <tr>\n          <th colSpan={5}>cmd</th>\n        </tr>\n      </thead>\n      <tbody>\n        {terms.map((term, index) => (\n          <React.Fragment key={index}>\n            <tr\n              style={{\n                borderBottom: term.Data_Expression\n                  ? undefined\n                  : '2px solid #e8e8e8',\n              }}\n            >\n              <td>{term.Type_Influence}</td>\n              <td>{term.Data_Param1}</td>\n              <td>{term.Data_Param2}</td>\n              <td>{term.Data_Param3}</td>\n              <td>{term.Data_Param4}</td>\n            </tr>\n            {term.Data_Expression && (\n              <tr style={{ borderBottom: '2px solid #e8e8e8' }}>\n                <td colSpan={5}>{term.Data_Expression}</td>\n              </tr>\n            )}\n          </React.Fragment>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default QuestTermTable;\n","import React, { useState } from 'react';\nimport gql from 'graphql-tag';\nimport { Layout, Row, Col, Tag, Icon, Button } from 'antd';\nimport { Link } from 'react-router-dom';\nimport useRouter from 'use-react-router';\nimport { ICO_URL } from 'consts';\nimport EnemyTable from './EnemyTable';\nimport styles from './Quest.module.less';\nimport Loading from 'Components/Loading';\nimport { useQuery } from '@apollo/react-hooks';\nimport { renderDescription } from 'utils';\nimport { MapEntry, Enemy } from 'interfaces';\nimport { DotFragment, EnemyFragment } from 'fragments';\nimport PreviewDot from './PreviewDot';\nimport MapTable from './MapTable';\nimport QuestTermTable from './QuestTermTable';\nimport { Quest as QuestType } from 'interfaces';\n\nconst { Content } = Layout;\n\nconst Quest: React.FC = () => {\n  const { match } = useRouter<{ QuestID: string }>();\n  const QuestID = Number.parseInt(match.params.QuestID, 10);\n  const [showTerms, setShowTerms] = useState(false);\n  const [showHardTerms, setShowHardTerms] = useState(false);\n\n  const { data, loading } = useQuery<{\n    Quest: QuestType;\n    QuestEventTexts: Array<{\n      Message: string;\n      Name: string;\n      FaceID: number;\n    }>;\n  }>(\n    gql`\n      fragment termConfig on QuestTermConfig {\n        Type_Influence\n        Data_Param1\n        Data_Param2\n        Data_Param3\n        Data_Param4\n        Data_Expression\n      }\n      query($id: Int!) {\n        Quest(QuestID: $id) {\n          EventArcs {\n            _TalkerName\n            _TalkText\n          }\n          Name\n          Message\n          Charisma\n          EntryNo\n          LocationNo\n          Level\n          ActionPoint\n          Treasure1\n          Treasure2\n          Treasure3\n          Treasure4\n          Treasure5\n          RankExp\n          Gold\n          Capacity\n          QuestTerms\n          _HardCondition\n          QuestTermConfigs {\n            ...termConfig\n          }\n          QuestHardTermConfigs {\n            ...termConfig\n          }\n          Mission {\n            MissionID\n            Enemies {\n              ...enemy\n            }\n            BattleTalkEvents {\n              Message\n              Name\n              FaceID\n              RecordIndex\n            }\n          }\n          MapNo\n          Map {\n            Image\n            Entries {\n              EnemyID\n              Wait\n              RouteNo\n              Loop\n              Level\n              PrizeEnemySpawnPercent\n              PrizeCardID\n              PrizeEnemyDropPercent\n              RouteOffset\n              IsAppear\n              FreeCommand\n              EntryCommand\n              DeadCommand\n            }\n            Routes {\n              X\n              Y\n              JumpPoint\n              WarpDelay\n              WaitTime\n              OnEvent\n            }\n            Locations {\n              ObjectID\n              X\n              Y\n              _Command\n            }\n            Enemies {\n              ...enemy\n            }\n          }\n        }\n        QuestEventTexts {\n          Message\n          Name\n          FaceID\n        }\n      }\n      ${DotFragment}\n      ${EnemyFragment}\n    `,\n    { variables: { id: QuestID } },\n  );\n\n  const dropper: Array<Array<Enemy & MapEntry>> = [[], [], [], [], []];\n  let enemiesCount = 0;\n  if (data) {\n    const enemies = data.Quest.Map.Enemies || data.Quest.Mission.Enemies;\n    const entries = data.Quest.Map.Entries[data.Quest.EntryNo];\n    for (const entry of entries) {\n      if (entry.EnemyID >= 0 && entry.EnemyID < 1000) {\n        enemiesCount += entry.Loop;\n        if (entry.PrizeCardID !== 0) {\n          dropper[entry.PrizeCardID - 1].push({\n            ...enemies[entry.EnemyID - 1],\n            ...entry,\n            Loop: enemiesCount,\n          });\n        }\n      }\n    }\n  }\n\n  const haveDrop = dropper\n    .map(drop => drop.length !== 0)\n    .reduce((prev, curr) => prev || curr);\n\n  return (\n    <Content className={styles.questContainer}>\n      {loading && <Loading />}\n      {data && data.Quest && (\n        <div>\n          <h1 className={styles.questTitle}>\n            <Link to={`/quest/${QuestID - 1}`}>\n              <Icon type=\"left\" />\n            </Link>\n            {data.Quest.Name}\n            <Link to={`/quest/${QuestID + 1}`}>\n              <Icon type=\"right\" />\n            </Link>\n          </h1>\n          <div>\n            {data.Quest.Charisma ? (\n              <Tag color=\"green\">\n                魅力：\n                {data.Quest.Charisma}\n              </Tag>\n            ) : null}\n            {data.Quest.ActionPoint ? (\n              <Tag color=\"red\">\n                体力：\n                {data.Quest.ActionPoint}\n              </Tag>\n            ) : null}\n          </div>\n          <Row gutter={8} className={styles.questInfo}>\n            <Col md={12} sm={24}>\n              <MapTable quest={data.Quest} />\n            </Col>\n            <Col md={12} sm={24}>\n              <table className={styles.table} style={{ margin: 0 }}>\n                <tbody>\n                  <tr>\n                    <td colSpan={4}>\n                      <div\n                        dangerouslySetInnerHTML={{\n                          __html: renderDescription(data.Quest.Message),\n                        }}\n                        style={{\n                          textAlign: 'left',\n                          maxWidth: '20em',\n                          margin: 'auto',\n                        }}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>经验</th>\n                    <td>{data.Quest.RankExp}</td>\n                    <th>钱</th>\n                    <td>{data.Quest.Gold}</td>\n                  </tr>\n                  <tr>\n                    <th>心数</th>\n                    <td>{data.Quest.Capacity}</td>\n                    <th>怪数</th>\n                    <td>{enemiesCount}</td>\n                  </tr>\n                  <tr>\n                    <th>补正</th>\n                    <td>{data.Quest.Level}</td>\n                    <th>设置</th>\n                    <td>\n                      {data.Quest.QuestTerms !== 0 && (\n                        <Button\n                          type=\"primary\"\n                          size=\"small\"\n                          onClick={() => setShowTerms(!showTerms)}\n                          icon={showTerms ? 'up' : 'down'}\n                        />\n                      )}\n                    </td>\n                  </tr>\n                  {showTerms && (\n                    <tr>\n                      <td colSpan={4} style={{ padding: 0 }}>\n                        <QuestTermTable terms={data.Quest.QuestTermConfigs} />\n                      </td>\n                    </tr>\n                  )}\n                  {data.Quest._HardCondition !== 0 && (\n                    <tr>\n                      <th>4☆补正</th>\n                      <td>{data.Quest.Level}</td>\n                      <th>设置</th>\n                      <td>\n                        <Button\n                          type=\"primary\"\n                          size=\"small\"\n                          onClick={() => setShowHardTerms(!showHardTerms)}\n                          icon={showHardTerms ? 'up' : 'down'}\n                        />\n                      </td>\n                    </tr>\n                  )}\n                  {showHardTerms && (\n                    <tr>\n                      <td colSpan={4} style={{ padding: 0 }}>\n                        <QuestTermTable\n                          terms={data.Quest.QuestHardTermConfigs}\n                        />\n                      </td>\n                    </tr>\n                  )}\n                  {haveDrop && (\n                    <tr>\n                      <td colSpan={4}>\n                        <table>\n                          <tbody>\n                            <tr>\n                              {dropper.map((_, index) => {\n                                const treasure: number = (data.Quest as any)[\n                                  `Treasure${index + 1}`\n                                ];\n                                return (\n                                  <td style={{ width: '20%' }} key={index}>\n                                    {treasure ? (\n                                      <div>\n                                        <img\n                                          alt={treasure.toString()}\n                                          style={{ width: '100%' }}\n                                          src={`${ICO_URL}/0/${treasure}.png`}\n                                        />\n                                        {dropper[4].length === 0 &&\n                                          index === 4 && (\n                                            <Tag\n                                              color=\"red\"\n                                              style={{ margin: 0 }}\n                                            >\n                                              COM\n                                            </Tag>\n                                          )}\n                                      </div>\n                                    ) : null}\n                                  </td>\n                                );\n                              })}\n                            </tr>\n                            <tr>\n                              {dropper.map((drops, index) => (\n                                <td key={index}>\n                                  {drops.map((drop, i) => {\n                                    return (\n                                      <div key={i}>\n                                        <PreviewDot enemy={drop} />#{drop.Loop}\n                                      </div>\n                                    );\n                                  })}\n                                </td>\n                              ))}\n                            </tr>\n                          </tbody>\n                        </table>\n                      </td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </Col>\n          </Row>\n          {data && <EnemyTable data={data} />}\n          {data && data.Quest.EventArcs && data.Quest.EventArcs.length !== 0 && (\n            <div>\n              <h2>过场对话</h2>\n              <table className={styles.table}>\n                <tbody>\n                  {data.Quest.EventArcs.map((arc, index) => (\n                    <tr key={index}>\n                      <th>{arc._TalkerName}</th>\n                      <td>\n                        <div\n                          dangerouslySetInnerHTML={{\n                            __html: renderDescription(arc._TalkText),\n                          }}\n                          style={{\n                            margin: 'auto',\n                            maxWidth: '30em',\n                            textAlign: 'left',\n                          }}\n                        />\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      )}\n    </Content>\n  );\n};\n\nexport default Quest;\n","import React from 'react';\nimport { Layout, Collapse, Drawer, Menu } from 'antd';\nimport gql from 'graphql-tag';\nimport _ from 'lodash';\nimport { MISSION_TYPE } from './types';\nimport MissionShutter from './MissionShutter';\nimport useRouter from 'use-react-router';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useMediaQuery } from 'react-responsive';\nimport Quest from '../Quest';\nimport Loading from 'Components/Loading';\nimport styles from './QuestList.module.less';\nimport { useState } from 'react';\n\nconst { Content, Sider } = Layout;\nconst Panel = Collapse.Panel;\n\nconst QuestList: React.FC = () => {\n  const { match, history } = useRouter<{ QuestID: string }>();\n  const { QuestID } = match.params;\n\n  const [currentMissionType, setCurrentMissionType] = useState('Emergency');\n\n  const isTabletOrMobile = useMediaQuery({ query: '(max-width: 991px)' });\n\n  const { loading, data } = useQuery<{\n    Missions: Array<{\n      Name: string;\n      Type: string;\n      MissionID: number;\n    }>;\n  }>(\n    gql`\n      query {\n        Missions {\n          Name\n          Type\n          MissionID\n        }\n      }\n    `,\n  );\n\n  const missions = data ? Object.entries(_.groupBy(data.Missions, 'Type')) : [];\n\n  return (\n    <Layout style={{ position: 'relative' }}>\n      <Sider theme=\"light\" className={styles.sider}>\n        {loading ? (\n          <Loading />\n        ) : (\n          <Menu\n            theme=\"light\"\n            selectedKeys={[currentMissionType]}\n            onSelect={p => setCurrentMissionType(p.key)}\n            style={{ border: 'none' }}\n          >\n            {missions.map(([key]) => (\n              <Menu.Item key={key}>{MISSION_TYPE[key]}</Menu.Item>\n            ))}\n          </Menu>\n        )}\n      </Sider>\n      <Content style={{ position: 'relative' }}>\n        <div\n          style={{\n            height: '100%',\n            overflow: 'auto',\n          }}\n        >\n          <Content className={styles.missionListContent}>\n            {!loading ? (\n              <Collapse bordered={false}>\n                {missions\n                  .find(m => m[0] === currentMissionType)![1]\n                  .map(mission => {\n                    return (\n                      <Panel\n                        key={mission.MissionID}\n                        header={\n                          <span>\n                            {mission.MissionID}\n                            &nbsp;\n                            <strong>{mission.Name}</strong>\n                          </span>\n                        }\n                      >\n                        <MissionShutter\n                          mission={mission}\n                          isTabletOrMobile={isTabletOrMobile}\n                        />\n                      </Panel>\n                    );\n                  })}\n              </Collapse>\n            ) : (\n              <Loading />\n            )}\n          </Content>\n        </div>\n      </Content>\n      <Drawer\n        width={isTabletOrMobile ? '100%' : '80%'}\n        visible={!!QuestID}\n        destroyOnClose\n        onClose={() => history.push('/quest')}\n        getContainer={false}\n        style={{ position: 'absolute' }}\n      >\n        {QuestID && <Quest />}\n      </Drawer>\n    </Layout>\n  );\n};\n\nexport default QuestList;\n","import React, { useState } from 'react';\nimport { Layout, Spin, Pagination, Input } from 'antd';\n\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport { ClassData } from 'interfaces';\nimport ClassTable from 'Components/ClassTable';\nimport { MissileFragment } from 'fragments';\n\nconst { Content } = Layout;\n\nconst ClassList: React.FC = () => {\n  const [search, setSearch] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const handleSetSearch = (value: string) => {\n    setSearch(value);\n    setCurrentPage(1);\n  };\n\n  const classFilter = (unitClass: any) => {\n    return JSON.stringify(unitClass).includes(search);\n  };\n\n  const { data, loading, refetch } = useQuery<{ Classes: ClassData[] }>(gql`\n    query {\n      Classes {\n        AttackAttribute\n        Missile {\n          ...missile\n        }\n        ClassID\n        Name\n        Explanation\n        JobChange\n        JobChangeMaterial1\n        JobChangeMaterial2\n        JobChangeMaterial3\n        Data_ExtraAwakeOrb1\n        Data_ExtraAwakeOrb2\n        AwakeType1\n        AwakeType2\n        AttackWait\n        NickNames\n        ClassAbilityConfigs {\n          _InvokeType\n          _TargetType\n          _InfluenceType\n          _Param1\n          _Param2\n          _Param3\n          _Param4\n          _Command\n          _ActivateCommand\n        }\n        ClassAbilityPower1\n        Cards {\n          CardID\n          Name\n          Rare\n        }\n      }\n    }\n    ${MissileFragment}\n  `);\n\n  return (\n    <Content className=\"container\">\n      <Spin spinning={loading}>\n        <Input\n          placeholder=\"搜索职业\"\n          value={search}\n          onChange={event => {\n            handleSetSearch(event.target.value);\n          }}\n        />\n        {data &&\n          data.Classes &&\n          data.Classes.filter(classFilter)\n            .sort((c1, c2) => c1.ClassID - c2.ClassID)\n            .slice(50 * (currentPage - 1), 50 * currentPage)\n            .map(unitClass => {\n              return (\n                <ClassTable\n                  key={unitClass.ClassID}\n                  classData={unitClass}\n                  onCompleted={refetch}\n                />\n              );\n            })}\n        {data && data.Classes && (\n          <Pagination\n            defaultCurrent={1}\n            defaultPageSize={50}\n            current={currentPage}\n            onChange={page => setCurrentPage(page)}\n            total={data.Classes.filter(classFilter).length}\n          />\n        )}\n      </Spin>\n    </Content>\n  );\n};\n\nexport default ClassList;\n","import React, { useState } from 'react';\nimport { Layout, Pagination, Input } from 'antd';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport { SkillData } from 'interfaces';\nimport SkillTable from 'Components/SkillTable';\nimport Loading from 'Components/Loading';\n\nconst { Content } = Layout;\n\ninterface Data {\n  Skills: SkillData[];\n}\n\nconst SkillList: React.FC = () => {\n  const [search, setSearch] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const handleSetSearch = (search: string) => {\n    setSearch(search);\n    setCurrentPage(1);\n  };\n\n  const skillFilter = (skill: any) => {\n    return !search || JSON.stringify(skill).includes(search);\n  };\n\n  const { data, loading } = useQuery<Data>(gql`\n    query {\n      Skills {\n        SkillID\n        SkillName\n        WaitTime\n        ContTimeMax\n        PowerMax\n        LevelMax\n        Text\n        Configs {\n          Type_Collision\n          Type_CollisionState\n          Type_ChangeFunction\n          Data_Target\n          Data_InfluenceType\n          Data_MulValue\n          Data_MulValue2\n          Data_MulValue3\n          Data_AddValue\n          _HoldRatioUpperLimit\n          _Expression\n          _ExpressionActivate\n        }\n        Cards {\n          CardID\n          Name\n          Rare\n        }\n      }\n    }\n  `);\n\n  return (\n    <Content className=\"container\">\n      <Loading spinning={loading}>\n        <Input\n          placeholder=\"搜索技能\"\n          value={search}\n          onChange={event => {\n            handleSetSearch(event.target.value);\n          }}\n        />\n        {data &&\n          data.Skills &&\n          data.Skills.filter(skillFilter)\n            .slice(50 * (currentPage - 1), 50 * currentPage)\n            .map((skill, index) => <SkillTable skills={[skill]} key={index} />)}\n        {data && data.Skills && (\n          <Pagination\n            defaultCurrent={1}\n            defaultPageSize={50}\n            current={currentPage}\n            onChange={page => setCurrentPage(page)}\n            total={data.Skills.filter(skillFilter).length}\n          />\n        )}\n      </Loading>\n    </Content>\n  );\n};\n\nexport default SkillList;\n","import React, { useState } from 'react';\nimport { Spin, Layout, Pagination, Input } from 'antd';\nimport gql from 'graphql-tag';\nimport { AbilityData } from 'interfaces';\nimport { useQuery } from '@apollo/react-hooks';\nimport AbilityTable from 'Components/AbilityTable';\n\nconst { Content } = Layout;\n\nconst AbilityList: React.FC = () => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [search, setSearch] = useState('');\n\n  const handleSetSearch = (search: string) => {\n    setSearch(search);\n    setCurrentPage(1);\n  };\n\n  const abilityFilter = (ability: AbilityData) => {\n    return !search || (search && JSON.stringify(ability).includes(search));\n  };\n\n  const { data, loading } = useQuery<{ Abilities: AbilityData[] }>(gql`\n    query {\n      Abilities {\n        AbilityID\n        Text\n        AbilityName\n        Configs {\n          _InvokeType\n          _TargetType\n          _InfluenceType\n          _Param1\n          _Param2\n          _Param3\n          _Param4\n          _Command\n          _ActivateCommand\n        }\n        Cards {\n          CardID\n          Name\n          Rare\n        }\n      }\n    }\n  `);\n\n  return (\n    <Content className=\"container\">\n      <Spin spinning={loading}>\n        <Input\n          placeholder=\"搜索被动\"\n          value={search}\n          onChange={event => {\n            handleSetSearch(event.target.value);\n          }}\n        />\n        {data &&\n          data.Abilities &&\n          data.Abilities.filter(abilityFilter)\n            .slice(50 * (currentPage - 1), 50 * currentPage)\n            .map((ability, index) => {\n              return <AbilityTable ability={ability} key={index} />;\n            })}\n        {data && data.Abilities && (\n          <Pagination\n            defaultCurrent={1}\n            defaultPageSize={50}\n            current={currentPage}\n            onChange={page => setCurrentPage(page)}\n            total={data.Abilities.filter(abilityFilter).length}\n          />\n        )}\n      </Spin>\n    </Content>\n  );\n};\n\nexport default AbilityList;\n","import * as React from 'react';\nimport {\n  Layout,\n  Row,\n  Col,\n  Spin,\n  Icon,\n  Popconfirm,\n  Drawer,\n  Tag,\n  Modal,\n} from 'antd';\nimport { Query, Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport classNames from 'classnames';\nimport styles from './index.module.less';\nimport { EMOJI_URL } from '../../../consts';\n\nconst { Content } = Layout;\n\ninterface Data {\n  emojis: Array<{\n    _id: string;\n    emoji: string;\n    name: string;\n    group: number[];\n  }>;\n}\n\ninterface EmojiListStates {\n  drawerVisible: boolean;\n  currentEmoji: {\n    _id: string;\n    name: string[];\n    emoji: string[];\n    group: number[];\n  };\n  modalVisible: boolean;\n  currentImage: string;\n}\nexport default class EmojiList extends React.Component<any, EmojiListStates> {\n  public state: EmojiListStates = {\n    drawerVisible: false,\n    currentEmoji: {\n      _id: '',\n      name: [],\n      emoji: [],\n      group: [],\n    },\n    modalVisible: false,\n    currentImage: '',\n  };\n\n  public isImg = (img: string) => {\n    const [, ext] = img.split('.');\n    if (['jpg', 'jpeg', 'png', 'gif', 'bmp'].indexOf(ext) !== -1) {\n      return true;\n    }\n    return false;\n  };\n\n  public render() {\n    return (\n      <Query<Data>\n        query={gql`\n          query {\n            emojis {\n              _id\n              emoji\n              name\n              group\n            }\n          }\n        `}\n      >\n        {({ loading, error, data, refetch }) => (\n          <Content className=\"container\">\n            <Spin spinning={loading}>\n              <Row className=\"sorter-block\">\n                <Col span={2}>#</Col>\n                <Col span={7}>名称</Col>\n                <Col span={9}>存在的群</Col>\n                <Col span={6}>数量</Col>\n              </Row>\n            </Spin>\n            {data &&\n              data.emojis &&\n              data.emojis.map((emoji: any, index: number) => (\n                <Row\n                  className=\"list-card\"\n                  key={emoji._id}\n                  onClick={() => {\n                    this.setState({ drawerVisible: true, currentEmoji: emoji });\n                  }}\n                >\n                  <Col span={2}>{index + 1}</Col>\n                  <Col span={7} className=\"important\">\n                    {emoji.name.join(', ')}\n                  </Col>\n                  <Col span={9}>{emoji.group.join(', ')}</Col>\n                  <Col span={6}>{emoji.emoji && emoji.emoji.length}</Col>\n                  <div\n                    className={classNames(\n                      'list-card-addon',\n                      styles.deleteIconContainer,\n                    )}\n                    onClick={e => {\n                      e.stopPropagation();\n                    }}\n                  >\n                    <Mutation\n                      mutation={gql`\n                        mutation removeEmoji($ID: String!) {\n                          removeEmoji(ID: $ID)\n                        }\n                      `}\n                    >\n                      {(removeEmoji: any, { data }: any) => (\n                        <Popconfirm\n                          title=\"是否要删除这个emoji？\"\n                          onConfirm={() => {\n                            removeEmoji({\n                              variables: {\n                                ID: emoji._id,\n                              },\n                            }).then(() => {\n                              refetch();\n                            });\n                          }}\n                        >\n                          <Icon\n                            className={styles.deleteIcon}\n                            type=\"delete\"\n                            theme=\"outlined\"\n                          />\n                        </Popconfirm>\n                      )}\n                    </Mutation>\n                  </div>\n                </Row>\n              ))}\n            <Drawer\n              width={'70%'}\n              className={styles.emojiDrawer}\n              title=\"emojij详情\"\n              onClose={() => this.setState({ drawerVisible: false })}\n              visible={this.state.drawerVisible}\n            >\n              <div style={{ marginBottom: 10 }}>\n                <span className=\"label\">名称:</span>\n                {this.state.currentEmoji.name.map(name => (\n                  <Tag key={name} color=\"blue\">\n                    {name}\n                  </Tag>\n                ))}\n              </div>\n              <div style={{ marginBottom: 10 }}>\n                <span className=\"label\">分组:</span>\n                {this.state.currentEmoji.group.map(group => (\n                  <Tag key={group} color=\"blue\">\n                    {group}\n                  </Tag>\n                ))}\n              </div>\n              <div className={styles.imageContainer}>\n                {this.state.currentEmoji.emoji.map(\n                  (emoji: any, index: number) => {\n                    return (\n                      <div key={emoji} className={styles.imageBox}>\n                        <div className={styles.imageCover}>\n                          <div className={styles.imageActionContainer}>\n                            <Icon\n                              className={styles.imageAction}\n                              type=\"eye\"\n                              theme=\"outlined\"\n                              onClick={() => {\n                                this.setState({\n                                  modalVisible: true,\n                                  currentImage: emoji,\n                                });\n                              }}\n                            />\n                            <Mutation\n                              mutation={gql`\n                                mutation removeEmojiItem(\n                                  $ID: String!\n                                  $index: Int!\n                                ) {\n                                  removeEmojiItem(ID: $ID, index: $index)\n                                }\n                              `}\n                            >\n                              {(removeEmojiItem: any) => {\n                                return (\n                                  <Popconfirm\n                                    title=\"是否要删除这个emoji？\"\n                                    onConfirm={() => {\n                                      removeEmojiItem({\n                                        variables: {\n                                          ID: this.state.currentEmoji._id,\n                                          index,\n                                        },\n                                      }).then((data: any) => {\n                                        if (data && data.data.removeEmojiItem) {\n                                          refetch();\n                                          this.setState(({ currentEmoji }) => ({\n                                            currentEmoji: {\n                                              ...currentEmoji,\n                                              emoji: [\n                                                ...currentEmoji.emoji.slice(\n                                                  0,\n                                                  index,\n                                                ),\n                                                ...currentEmoji.emoji.slice(\n                                                  index + 1,\n                                                ),\n                                              ],\n                                            },\n                                          }));\n                                        }\n                                      });\n                                    }}\n                                  >\n                                    <Icon\n                                      className={styles.imageAction}\n                                      type=\"delete\"\n                                      theme=\"outlined\"\n                                    />\n                                  </Popconfirm>\n                                );\n                              }}\n                            </Mutation>\n                          </div>\n                        </div>\n                        {this.isImg(emoji) ? (\n                          <img alt={emoji} src={`${EMOJI_URL}/${emoji}`} />\n                        ) : (\n                          <span>{emoji}</span>\n                        )}\n                      </div>\n                    );\n                  },\n                )}\n              </div>\n            </Drawer>\n            <Modal\n              onCancel={() => this.setState({ modalVisible: false })}\n              visible={this.state.modalVisible}\n              footer={null}\n              style={{ textAlign: 'center' }}\n            >\n              {this.isImg(this.state.currentImage) ? (\n                <img\n                  alt={this.state.currentImage}\n                  src={`${EMOJI_URL}/${this.state.currentImage}`}\n                />\n              ) : (\n                <span>{this.state.currentImage}</span>\n              )}\n            </Modal>\n          </Content>\n        )}\n      </Query>\n    );\n  }\n}\n","import React from 'react';\nimport { Layout, Input, Form, Button, Icon } from 'antd';\nimport useForm from 'rc-form-hooks';\nimport UserContext from '../../../context/UserContext';\nimport styles from './Login.module.less';\n\nconst { Content } = Layout;\n\nconst Login: React.FC = () => {\n  const { getFieldDecorator, validateFields } = useForm<{ token: string }>();\n  const { login } = UserContext.useContainer();\n  const handleLogin = async () => {\n    const values = await validateFields();\n    login(values.token);\n  };\n  return (\n    <Content>\n      <Form className={styles.loginForm}>\n        <Form.Item>\n          {getFieldDecorator('token')(\n            <Input\n              type=\"password\"\n              prefix={\n                <Icon\n                  onClick={handleLogin}\n                  style={{ cursor: 'default' }}\n                  type=\"lock\"\n                />\n              }\n            />,\n          )}\n        </Form.Item>\n        <Button type=\"primary\" block>\n          登录\n        </Button>\n      </Form>\n    </Content>\n  );\n};\n\nexport default Login;\n","import React from 'react';\r\nimport MissileTable from 'Components/MissileTable';\r\nimport { Layout } from 'antd';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport { MissileFragment } from 'fragments';\r\nimport Loading from 'Components/Loading';\r\nimport { Missile } from 'interfaces';\r\n\r\nconst { Content } = Layout;\r\n\r\nconst MissileList: React.FC = () => {\r\n  const { data, loading } = useQuery<{ Missiles: Missile[] }>(gql`\r\n    query {\r\n      Missiles {\r\n        ...missile\r\n      }\r\n    }\r\n    ${MissileFragment}\r\n  `);\r\n  return (\r\n    <Content className=\"container\">\r\n      <Loading spinning={loading}>\r\n        {data &&\r\n          data.Missiles.map((missile, index) => (\r\n            <MissileTable missile={missile} key={index} />\r\n          ))}\r\n      </Loading>\r\n    </Content>\r\n  );\r\n};\r\n\r\nexport default MissileList;\r\n","import React from 'react';\nimport { Layout } from 'antd';\nimport {\n  withRouter,\n  Switch,\n  Route,\n  RouteComponentProps,\n  Redirect,\n} from 'react-router-dom';\nimport UserContext from '../context/UserContext';\nimport Header from './Header';\n\nimport Home from './Routes/Home';\nimport UnitList from './Routes/UnitList';\nimport QuestList from './Routes/QuestList';\nimport ClassList from './Routes/ClassList';\nimport SkillList from './Routes/SkillList';\nimport AbilityList from './Routes/AbilityList';\nimport EmojiList from './Routes/EmojiList';\nimport Login from './Routes/Login';\nimport MissileList from './Routes/MissileList';\n\nconst Router: React.FC<RouteComponentProps> = () => {\n  const { isLoggedIn } = UserContext.useContainer();\n\n  return !isLoggedIn ? (\n    <Switch>\n      <Route path=\"/\" exact component={Login} />\n      <Redirect to=\"/\" />\n    </Switch>\n  ) : (\n    <Layout>\n      <Header />\n      <Switch>\n        <Route path=\"/unit/:CardID\" component={UnitList} />\n        <Route path=\"/quest/:QuestID\" component={QuestList} />\n        <Route path=\"/unit\" exact component={UnitList} />\n        <Route path=\"/quest\" exact component={QuestList} />\n        <Route path=\"/class\" exact component={ClassList} />\n        <Route path=\"/skill\" exact component={SkillList} />\n        <Route path=\"/ability\" exact component={AbilityList} />\n        <Route path=\"/missile\" exact component={MissileList} />\n        <Route path=\"/emoji\" exact component={EmojiList} />\n        <Route component={Home} />\n      </Switch>\n    </Layout>\n  );\n};\n\nexport default withRouter(Router);\n","import { Layout } from 'antd';\nimport * as React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport { ConfigProvider } from 'antd';\nimport zhCN from 'antd/lib/locale-provider/zh_CN';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport './App.less';\nimport UserContext from './context/UserContext';\nimport MediaContext from './context/MediaContext';\nimport Router from './Components/Router';\nimport { API_URL } from './consts';\n\nmoment.locale('zh-cn');\n\nconst client = new ApolloClient({\n  uri: API_URL,\n});\n\nclass App extends React.Component {\n  public render() {\n    return (\n      <HashRouter>\n        <ConfigProvider locale={zhCN}>\n          <ApolloProvider client={client}>\n            <UserContext.Provider>\n              <MediaContext.Provider>\n                <Layout className=\"App\" style={{ height: '100%' }}>\n                  <Router />\n                </Layout>\n              </MediaContext.Provider>\n            </UserContext.Provider>\n          </ApolloProvider>\n        </ConfigProvider>\n      </HashRouter>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.less';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root') as HTMLElement);\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table--KBP_i\",\"th\":\"th--12gvq\",\"compact\":\"compact--3h5bu\",\"fakeInput\":\"fakeInput--3j1VW\",\"questContainer\":\"questContainer--1_Nzl\",\"questInfo\":\"questInfo--2d-n2\",\"tableActions\":\"tableActions--5NQPY\",\"enemyRowWithChange\":\"enemyRowWithChange--3o_8I\",\"rowShow\":\"rowShow--1zKw7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"unitRaritySider\":\"unitRaritySider--2gItA\",\"unitRarityMenu\":\"unitRarityMenu--8Qf5n\",\"unitListContent\":\"unitListContent--36QQ2\",\"sider\":\"sider--2tJQ0\",\"filterContainer\":\"filterContainer--2VKib\",\"sorterBlock\":\"sorterBlock--KBZMT\",\"shadow\":\"shadow--1W6Jm\",\"listContainer\":\"listContainer--1bWDn\",\"listCard\":\"listCard--1Bay0\",\"male\":\"male--3nLop\",\"female\":\"female--29QGQ\",\"disable\":\"disable--qpu_p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteIconContainer\":\"deleteIconContainer--Ka13J\",\"deleteIcon\":\"deleteIcon--396xM\",\"imageContainer\":\"imageContainer--chkYQ\",\"imageBox\":\"imageBox--10DU5\",\"imageCover\":\"imageCover--NtOwb\",\"imageActionContainer\":\"imageActionContainer--rumP3\",\"imageAction\":\"imageAction--2P1vd\"};"],"sourceRoot":""}